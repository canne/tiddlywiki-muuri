{
    "tiddlers": {
        "$:/config/muuri/storyview/columns/max": {
            "text": "6",
            "title": "$:/config/muuri/storyview/columns/max",
            "tags": "",
            "modified": "20200829115410756",
            "created": "20200823131154891"
        },
        "$:/config/muuri/storyview/story-river/margin-top": {
            "text": "0.5em",
            "title": "$:/config/muuri/storyview/story-river/margin-top",
            "tags": "",
            "modified": "20201009175710242",
            "created": "20201009175703328"
        },
        "$:/config/muuri/storyview/dragsort-action": {
            "text": "0.5em",
            "title": "$:/config/muuri/storyview/story-river/margin-top",
            "tags": "",
            "modified": "20201009175710242",
            "created": "20201009175703328"
        },
        "$:/config/muuri/tiddler/margin": {
            "text": "0.5em",
            "title": "$:/config/muuri/tiddler/margin",
            "tags": "",
            "modified": "20201011134757979",
            "created": "20200823121609506"
        },
        "$:/config/muuri/tiddler/margin-bottom": {
            "text": "0.5em",
            "title": "$:/config/muuri/tiddler/margin-bottom",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/dragsort-action": {
            "text": "move",
            "title": "$:/config/muuri/storyview/dragsort-action",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/dragsort-threshold": {
            "text": "40",
            "title": "$:/config/muuri/storyview/dragsort-threshold",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/align-bottom": {
            "text": "0",
            "title": "$:/config/muuri/storyview/align-bottom",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/align-right": {
            "text": "yes",
            "title": "$:/config/muuri/storyview/align-right",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/fill-gaps": {
            "text": "no",
            "title": "$:/config/muuri/storyview/fill-gaps",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/config/muuri/storyview/hide-titles-tags": {
            "text": "no",
            "title": "$:/config/muuri/storyview/hide-titles-tags",
            "tags": "",
            "modified": "20200829124507292",
            "created": "20200829124500974"
        },
        "$:/core/images/storyview-muuri": {
            "text": "<svg class=\"tc-image-button tc-muuri-view-button\" width=\"22pt\" height=\"22pt\" viewBox=\"3 3 18 18\"><path d=\"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z\"/></svg>",
            "title": "$:/core/images/storyview-muuri",
            "tags": "$:/tags/Image",
            "modified": "20200823114414058",
            "created": "20200823114356269"
        },
        "$:/plugins/BTC/Muuri/css": {
            "created": "20201015190817028",
            "text": "\\define z-indices()\n\\rules only\n.tc-story-river.tc-muuri-river > [data-tiddler-title=\"$(cssEscapedTiddler)$\"].tc-tiddler-frame:not(.tc-muuri-dragging):not(.tc-muuri-positioning) {\n\tz-index: $(zIndex)$;\n}\n\\end\n\n.tc-muuri-dragging {\nz-index: 1;\n}\n\n.muuri-item-shown {\nposition: absolute;\n}\n\n<$reveal state=\"$:/view\" type=\"match\" text=\"muuri\">\n\n<$vars count={{{ [{$:/config/muuri/storyview/columns}] ~[[1]] }}} margin={{$:/config/muuri/tiddler/margin}} marginSuffix={{{ [{$:/config/muuri/storyview/align-right}match[yes]addprefix[right]removesuffix[yes]] ~[[$:/config/muuri/storyview/align-right]is[missing]then[right]] ~[[left]] }}} sidebarBreakPoint={{$:/themes/tiddlywiki/vanilla/metrics/sidebarbreakpoint}} marginBottom={{$:/config/muuri/tiddler/margin-bottom}} storyHighZIndex={{{ [list[$:/StoryList]count[]add[201]] }}}>\n\n@media(min-width:<<sidebarBreakPoint>>) {\n\n\t<$reveal state=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" type=\"match\" text=\"fluid-fixed\">\n\n\t\t.tc-story-river.tc-muuri-river {\n\t\t\tmin-width: calc(100% - {{$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth}});\n\t\t}\n\t\n\t</$reveal>\n\n\t<$reveal state=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" type=\"match\" text=\"fixed-fluid\">\n\n\t\t.tc-story-river.tc-muuri-river {\n\t\t\tmin-width: {{$:/themes/tiddlywiki/vanilla/metrics/storywidth}};\n\t\t}\n\n\t</$reveal>\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\tposition: absolute;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\twidth: calc((100% / <<count>>) - <<margin>> - (<<margin>> / <<count>>));\n\tmargin-<<marginSuffix>>: <<margin>>;\n\tmargin-bottom: <<marginBottom>>;\n}\n\n.tc-story-river.tc-muuri-river {\n\tmargin-top: {{$:/config/muuri/storyview/story-river/margin-top}};\n}\n\n\t.tc-sidebar-scrollable {\n\t\tpadding-left: calc(42px - <<margin>>);\n\t}\n\n<$reveal state=\"$:/config/muuri/storyview/columns\" type=\"gt\" text=\"2\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tiddler-info {\n\tpadding: 0;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-fold-banner, .tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-unfold-banner {\n\tmargin-left: -29px;\n}\n\n<$reveal state=\"$:/config/muuri/storyview/columns\" type=\"lt\" text=\"5\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\tpadding: 2em;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tiddler-info {\n\tmargin: 0 -2em 0 -2em;\n}\n\n</$reveal>\n\n<$reveal state=\"$:/config/muuri/storyview/columns\" type=\"gteq\" text=\"5\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\tpadding: 1em;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tiddler-info {\n\tmargin: 0 -1em 0 -1em;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-fold-banner, .tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-unfold-banner {\n\tmargin-left: -15px;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-unfold-banner {\n\tmargin-top: -6px;\n}\n\n</$reveal>\n\n</$reveal>\n\n<$reveal state=\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\" type=\"match\" text=\"fixed-fluid\">\n\n.tc-sidebar-scrollable {\n\tleft: calc({{$:/themes/tiddlywiki/vanilla/metrics/storyright}} + 42px);\n}\n\n\t<$reveal state=\"$:/state/sidebar\" type=\"nomatch\" text=\"no\">\n\n\t\t\t.tc-story-river.tc-muuri-river {\n\t\t\t\twidth: {{$:/themes/tiddlywiki/vanilla/metrics/storywidth}};\n\t\t\t}\n\n\t</$reveal>\n\n</$reveal>\n\n\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-fold-banner, .tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-unfold-banner {\n\t\tz-index: -1;\n\t}\n\n}\n\n@media(max-width:<<sidebarBreakPoint>>) {\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\tposition: absolute;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\twidth: calc((100% / 2) - <<margin>> - (<<margin>> / 2));\n\tmargin-<<marginSuffix>>: <<margin>>;\n\tmargin-bottom: <<marginBottom>>;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-titlebar {\n\tfont-size: 1.5em;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-titlebar .tc-tiddler-controls .tc-drop-down {\n\tfont-size: 1em;\n}\n\n.tc-story-river.tc-muuri-river {\n\tmargin-top: {{$:/config/muuri/storyview/story-river/margin-top}};\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tiddler-info {\n\tpadding: 0;\n}\n\n<$reveal state=\"$:/state/sidebar\" type=\"match\" text=\"no\">\n\n.tc-sidebar-scrollable {\n\tdisplay: none;\n}\n\n</$reveal>\n\n\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-fold-banner, .tc-story-river.tc-muuri-river > .tc-tiddler-frame button.tc-unfold-banner {\n\t\tz-index: -1;\n\t}\n\n}\n\n<$reveal state=\"$:/config/muuri/storyview/select-text\" type=\"nomatch\" text=\"yes\">\n\n\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame img {\n\t\tpointer-events: none;\n\t}\n\n</$reveal>\n\n<$reveal state=\"$:/config/muuri/storyview/fill-gaps\" type=\"match\" text=\"yes\">\n\n\t@media (min-width: <<sidebarBreakPoint>>) {\n\t\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\t\t\twidth: calc(100% / <<count>>);\n\t\t}\n\t\t\n\t\t.tc-story-river.tc-muuri-river {\n\t\t\tmargin-top: 0;\n\t\t}\n\t}\n\t\n\t@media (max-width: <<sidebarBreakPoint>>) {\n\t\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\t\t\twidth: calc(100% / 2);\n\t\t}\n\n\t\t.tc-story-river.tc-muuri-river {\n\t\t\tmargin-top: 0;\n\t\t}\n\t}\n\t\n\t@media(min-width:<<sidebarBreakPoint>>) {\n\t\n\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\t\tborder: none;\n\t\tborder-radius: 0px;\n\t\tbox-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\t-webkit-box-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\t-moz-box-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\tmargin-top: 0em;\n\t\tmargin-left: 0em;\n\t\tmargin-right: 0em;\n\t\tmargin-bottom: 0em;\n\t}\n\n}\n\n\t@media(max-width:<<sidebarBreakPoint>>) {\n\t\n\t.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\t\tborder: none;\n\t\tborder-radius: 0px;\n\t\tbox-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\t-webkit-box-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\t-moz-box-shadow: 1px 1px 1px <<colour tiddler-background>>;\n\t\tmargin-top: 0em;\n\t\tmargin-left: 0em;\n\t\tmargin-right: 0em;\n\t\tmargin-bottom: 0em;\n\t}\n\n}\n\n</$reveal>\n\n<$reveal state=\"$:/config/muuri/storyview/select-text\" type=\"match\" text=\"yes\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame {\n\ttouch-action: auto !important;\n\tuser-select: auto !important;\n\t-ms-user-select: text !important;\n\t-moz-user-select: text !important;\n\t-webkit-user-select: text !important;\n}\n\n</$reveal>\n\n<$list filter=\"[all[tiddlers]prefix[$:/state/popup/more-]limit[1]]\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tag-list-item {\n\tz-index: -1;\n}\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame [data-grid=\"muuri\"] {\n\tz-index: -1 !important;\n}\n\n</$list>\n\n.tc-story-river.tc-muuri-river {\n\tpadding: 0;\n}\n\n<$reveal state=\"$:/themes/tiddlywiki/vanilla/options/stickytitles\" type=\"match\" text=\"yes\">\n\n\t\t/*\n\t\tposition: sticky doesn't work well in the muuri view, it's disabled\n\t\t*/\n\t.tc-tiddler-title {\n\t\tposition: initial;\n\t\ttop: initial;\n\t\tbackground: initial;\n\t}\n\n</$reveal>\n\n\t<$list filter=\"[list[$:/state/muuri/tiddlers/z-indices]]\" variable=\"zIndexTiddler\">\n\n\t\t<$set name=\"zIndex\" value={{{[list[$:/state/muuri/tiddlers/z-indices]allafter<zIndexTiddler>] +[count[]] }}}>\n\n\t\t\t<$set name=\"cssEscapedTiddler\" value={{{ [<zIndexTiddler>escapecss[]] }}}>\n\n\t\t\t\t<<z-indices>>\n\n\t\t\t</$set>\n\n\t\t</$set>\n\n\t</$list>\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame.tc-muuri-dragging, .tc-story-river.tc-muuri-river > .tc-tiddler-frame.tc-muuri-releasing {\n\tz-index: <<storyHighZIndex>>;\n}\n\n<$reveal state=\"$:/config/muuri/storyview/hide-titles-tags\" type=\"match\" text=\"yes\">\n\n.tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-titlebar, .tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-subtitle, .tc-story-river.tc-muuri-river > .tc-tiddler-frame .tc-tags-wrapper {\n\tdisplay: none;\n}\n\n</$reveal>\n\n</$reveal>\n\n</$vars>\n\n</$reveal>\n",
            "title": "$:/plugins/BTC/Muuri/css",
            "tags": "$:/tags/Stylesheet",
            "modified": "20201214182447384"
        },
        "$:/plugins/BTC/Muuri/icons/column": {
            "text": "<$wikify name=\"foregroundColor\" text=<<colour page-background>>>\n<svg class=\"tc-image-button\" width=\"26pt\" height=\"26pt\" viewBox=\"3 3 18 18\"><g fill-rule=\"evenodd\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14\"/><text font-family=\"Helvetica\" font-size={{{ [<columns>length[]match[1]addprefix[12]removesuffix[1]] [<columns>length[]match[2]addprefix[10]removesuffix[2]] ~[[8]] }}} font-weight=\"bold\" fill=<<foregroundColor>>><tspan x=\"12\" y=\"16\" text-anchor=\"middle\"><<columns>></tspan></text></g></svg>\n</$wikify>",
            "title": "$:/plugins/BTC/Muuri/icons/column",
            "tags": "$:/tags/Image",
            "modified": "20200829173340656",
            "created": "20200823130448651"
        },
        "$:/plugins/BTC/Muuri/icons/dragging-toggle": {
            "text": "<svg class=\"tc-image-button\" width=\"22pt\" height=\"22pt\" viewBox=\"1 2 23 23\"><g fill-rule=\"evenodd\"><path d=\"M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z\"/></g></svg>",
            "title": "$:/plugins/BTC/Muuri/icons/dragging-toggle",
            "tags": "$:/tags/Image",
            "modified": "20200829130152254",
            "created": "20200829130133415"
        },
        "$:/plugins/BTC/Muuri/library/muuri.min.js": {
            "text": "/**\n* Muuri v0.10.0\n* https://muuri.dev/\n* Copyright (c) 2015-present, Haltu Oy\n* Released under the MIT license\n* https://github.com/haltu/muuri/blob/master/LICENSE.md\n* @license MIT\n*\n* Muuri Packer\n* Copyright (c) 2016-present, Niklas Rämö <inramo@gmail.com>\n* @license MIT\n*\n* Muuri Ticker / Muuri Emitter / Muuri Dragger\n* Copyright (c) 2018-present, Niklas Rämö <inramo@gmail.com>\n* @license MIT\n*\n* Muuri AutoScroller\n* Copyright (c) 2019-present, Niklas Rämö <inramo@gmail.com>\n* @license MIT\n*/\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).Muuri=e()}(this,(function(){\"use strict\";var t={},e=\"function\"==typeof Map?new Map:null,i=\"swap\",s=\"move\",n=\"layoutStart\",r=\"layoutEnd\",o=\"layoutAbort\",a=\"remove\",h=\"hideStart\",l=\"filter\",_=\"sort\",d=\"move\",c=\"send\",u=\"beforeSend\",f=\"receive\",p=\"beforeReceive\",m=\"dragReleaseEnd\",g=\"ontouchstart\"in window,v=!!window.PointerEvent,y=!!window.navigator.msPointerEnabled,D=window.navigator.userAgent.toLowerCase(),w=D.indexOf(\"edge\")>-1,S=D.indexOf(\"trident\")>-1,b=D.indexOf(\"firefox\")>-1,A=D.indexOf(\"android\")>-1,T=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,k=100;function x(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}x.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this},x.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i,s=this._events[t];if(!s||!s.length)return this;for(;-1!==(i=s.indexOf(e));)s.splice(i,1);return this},x.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this},x.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i,s=this._queue,n=s.length,r=arguments.length-1;r>3&&((i=[]).push.apply(i,arguments),i.shift()),s.push.apply(s,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var o=n,a=s.length;o<a;o++)if(0===r?s[o]():1===r?s[o](arguments[1]):2===r?s[o](arguments[1],arguments[2]):3===r?s[o](arguments[1],arguments[2],arguments[3]):s[o].apply(null,i),!this._events)return this;return--this._counter,this._counter||(s.length=0),this},x.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},x.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0},x.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var R=v?\"pointerout\":y?\"MSPointerOut\":\"\";function E(t){R&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on(\"start\",this._onStart))}E.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on(\"move\",this._resetData),this._dragger.on(\"cancel\",this._removeBehaviour),this._dragger.on(\"end\",this._removeBehaviour),window.addEventListener(R,this._onOut))},E.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off(\"move\",this._resetData),this._dragger.off(\"cancel\",this._removeBehaviour),this._dragger.off(\"end\",this._removeBehaviour),window.removeEventListener(R,this._onOut),this._resetData(),this._isActive=!1)},E.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},E.prototype._onStart=function(t){\"mouse\"!==t.pointerType&&this._addBehaviour()},E.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,100))},E.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)},E.prototype.destroy=function(){R&&(this._dragger.off(\"start\",this._onStart),this._removeBehaviour())};var C=[\"\",\"webkit\",\"moz\",\"ms\",\"o\",\"Webkit\",\"Moz\",\"MS\",\"O\"],L={};function X(t,e){var i=L[e]||\"\";if(i)return i;for(var s=e[0].toUpperCase()+e.slice(1),n=0;n<C.length;){if((i=C[n]?C[n]+s:e)in t)return L[e]=i,i;++n}return\"\"}var Y=!1;try{var I=Object.defineProperty({},\"passive\",{get:function(){Y=!0}});window.addEventListener(\"testPassive\",null,I),window.removeEventListener(\"testPassive\",null,I)}catch(t){}var M=Y,P={passive:!0,capture:!0},q=\"auto\",H=\"touchAction\",O=X(document.documentElement.style,H),G={start:\"touchstart\",move:\"touchmove\",cancel:\"touchcancel\",end:\"touchend\"},W=g?G:v?{start:\"pointerdown\",move:\"pointermove\",cancel:\"pointercancel\",end:\"pointerup\"}:y?{start:\"MSPointerDown\",move:\"MSPointerMove\",cancel:\"MSPointerCancel\",end:\"MSPointerUp\"}:{start:\"mousedown\",move:\"mousemove\",cancel:\"\",end:\"mouseup\"},N={start:\"start\",move:\"move\",end:\"end\",cancel:\"cancel\"};function B(t){return M?{passive:!!(1&t),capture:!!(2&t)}:!!(2&t)}function F(t){this.emitter=new x,this.listenerType=t,this.listenerOptions=B(t),this.draggers=[],this.onMove=this.onMove.bind(this),this.onCancel=this.onCancel.bind(this),this.onEnd=this.onEnd.bind(this)}function V(t,e,i){var s=(i||P).passive?1:0,n=(i||P).capture?2:0;this._element=t,this._emitter=new x,this._isDestroyed=!1,this._cssProps={},this._touchAction=\"\",this._listenerType=n|s,this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(w||S)&&(v||y)&&(this._edgeHack=new E(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(q),t.addEventListener(\"dragstart\",V._preventDefault,!1),t.addEventListener(W.start,this._onStart,B(this._listenerType))}F.prototype.hasDragger=function(t){return this.draggers.indexOf(t)>-1},F.prototype.addDragger=function(t){this.draggers.indexOf(t)>-1||(this.draggers.push(t),this.emitter.on(N.move,t._onMove),this.emitter.on(N.cancel,t._onCancel),this.emitter.on(N.end,t._onEnd),1===this.draggers.length&&this.activate())},F.prototype.removeDragger=function(t){var e=this.draggers.indexOf(t);-1!==e&&(this.draggers.splice(e,1),this.emitter.off(N.move,t._onMove),this.emitter.off(N.cancel,t._onCancel),this.emitter.off(N.end,t._onEnd),0===this.draggers.length&&this.deactivate())},F.prototype.activate=function(){window.addEventListener(W.move,this.onMove,this.listenerOptions),window.addEventListener(W.end,this.onEnd,this.listenerOptions),W.cancel&&window.addEventListener(W.cancel,this.onCancel,this.listenerOptions)},F.prototype.deactivate=function(){window.removeEventListener(W.move,this.onMove,this.listenerOptions),window.removeEventListener(W.end,this.onEnd,this.listenerOptions),W.cancel&&window.removeEventListener(W.cancel,this.onCancel,this.listenerOptions)},F.prototype.onMove=function(t){this.emitter.emit(N.move,t)},F.prototype.onCancel=function(t){this.emitter.emit(N.cancel,t)},F.prototype.onEnd=function(t){this.emitter.emit(N.end,t)},F.prototype.destroy=function(){this.draggers.length&&this.deactivate(),this.draggers.length=0,this.emitter.destroy()},V._preventDefault=function(t){t.preventDefault&&!1!==t.cancelable&&t.preventDefault()},V._getEventPointerId=function(t){return\"number\"==typeof t.pointerId?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1},V._getTouchById=function(t,e){if(\"number\"==typeof t.pointerId)return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t},V._inputEvents=W,V._emitterEvents=N,V._proxies=[new F(0),new F(1),new F(2),new F(3)],V.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1;var t=V._proxies[this._listenerType];t&&t.removeDragger(this)},V.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===N.start?0:this.getDeltaTime(),isFirst:t===N.start,isFinal:t===N.end||t===N.cancel,pointerType:e.pointerType||(e.touches?\"touch\":\"mouse\"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}},V.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))},V.prototype._getTrackedTouch=function(t){return null===this._pointerId?null:V._getTouchById(t,this._pointerId)},V.prototype._onStart=function(t){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=V._getEventPointerId(t),null!==this._pointerId)){var e=this._getTrackedTouch(t);if(this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(N.start,t),this._isActive){var i=V._proxies[this._listenerType];i&&i.addDragger(this)}}},V.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(N.move,t))},V.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(N.cancel,t),this._reset())},V.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(N.end,t),this._reset())},V.prototype.isActive=function(){return this._isActive},V.prototype.setTouchAction=function(t){this._touchAction=t,O&&(this._cssProps[O]=\"\",this._element.style[O]=t),g&&(this._element.removeEventListener(G.start,V._preventDefault,!0),t!==q&&(this._element.style[O]!==t||b&&A)&&this._element.addEventListener(G.start,V._preventDefault,!0))},V.prototype.setCssProps=function(t){if(t){var e,i,s=this._cssProps,n=this._element;for(e in s)n.style[e]=s[e],delete s[e];for(e in t)t[e]&&(e!==H?(i=X(n.style,e))&&(s[i]=\"\",n.style[i]=t[e]):this.setTouchAction(t[e]))}},V.prototype.setListenerOptions=function(t){if(t){var e,i,s=this._listenerType,n=(t.capture?2:0)|(t.passive?1:0);s!==n&&(this._element.removeEventListener(W.start,this._onStart,B(this._listenerType)),(i=!!(e=V._proxies[this._listenerType])&&e.hasDragger(this))&&e.removeDragger(this),this._listenerType=n,this._element.addEventListener(W.start,this._onStart,B(this._listenerType)),i&&(e=V._proxies[this._listenerType])&&e.addDragger(this))}},V.prototype.getDeltaX=function(){return this._currentX-this._startX},V.prototype.getDeltaY=function(){return this._currentY-this._startY},V.prototype.getDistance=function(){var t=this.getDeltaX(),e=this.getDeltaY();return Math.sqrt(t*t+e*e)},V.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},V.prototype.on=function(t,e){this._emitter.on(t,e)},V.prototype.off=function(t,e){this._emitter.off(t,e)},V.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;for(var e in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(W.start,this._onStart,B(this._listenerType)),t.removeEventListener(\"dragstart\",V._preventDefault,!1),t.removeEventListener(G.start,V._preventDefault,!0),this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var z=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return this.setTimeout((function(){t(Date.now())}),16.666666666666668)}).bind(window);function j(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new Q)}function Q(){this.queue=[],this.indices={},this.callbacks={}}j.prototype._step=function(t){var e,i,s,n,r,o,a=this._lanes,h=this._stepQueue,l=this._stepCallbacks;for(this._nextStep=null,e=0;e<a.length;e++){for(n=a[e].queue,r=a[e].callbacks,o=a[e].indices,i=0;i<n.length;i++)(s=n[i])&&(h.push(s),l[s]=r[s],delete r[s],delete o[s]);n.length=0}for(e=0;e<h.length;e++)l[s=h[e]]&&l[s](t),delete l[s];h.length=0},j.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nextStep=z(this._step))},j.prototype.remove=function(t,e){this._lanes[t].remove(e)},Q.prototype.add=function(t,e){var i=this.indices[t];void 0!==i&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1},Q.prototype.remove=function(t){var e=this.indices[t];void 0!==e&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var U=\"layoutRead\",Z=\"layoutWrite\",J=\"visibilityRead\",$=\"visibilityWrite\",K=\"dragStartRead\",tt=\"dragStartWrite\",et=\"dragMoveRead\",it=\"dragMoveWrite\",st=\"dragScrollRead\",nt=\"dragScrollWrite\",rt=\"dragSortRead\",ot=\"releaseScrollRead\",at=\"releaseScrollWrite\",ht=\"placeholderLayoutRead\",lt=\"placeholderLayoutWrite\",_t=\"placeholderResizeWrite\",dt=\"autoScrollRead\",ct=\"autoScrollWrite\",ut=\"debounceRead\",ft=new j(3);function pt(t){ft.remove(0,U+t),ft.remove(2,Z+t)}function mt(t){ft.remove(0,J+t),ft.remove(2,$+t)}function gt(t){ft.remove(0,K+t),ft.remove(2,tt+t)}function vt(t){ft.remove(0,et+t),ft.remove(2,it+t)}function yt(t){ft.remove(0,st+t),ft.remove(2,nt+t)}function Dt(t,e){ft.add(1,rt+t,e)}function wt(t){ft.remove(0,ht+t),ft.remove(2,lt+t)}function St(t,e){ft.add(0,dt,t),ft.add(2,ct,e)}function bt(t){return\"function\"==typeof t}var At,Tt=\"function\"==typeof WeakMap,kt=Tt?new WeakMap:null,xt=!0,Rt=function(){xt?(At=window.clearInterval(At),kt=Tt?new WeakMap:null):xt=!0};function Et(t,e){var i=kt&&kt.get(t);return i||(i=window.getComputedStyle(t,null),kt&&kt.set(t,i)),kt&&(At?xt=!1:At=window.setInterval(Rt,3e3)),i.getPropertyValue(e)}function Ct(t,e){return parseFloat(Et(t,e))||0}var Lt,Xt=document.documentElement,Yt=document.body,It={value:0,offset:0};function Mt(t){return t===window||t===Xt||t===Yt?window:t}function Pt(t){return t===window?t.pageXOffset:t.scrollLeft}function qt(t){return t===window?t.pageYOffset:t.scrollTop}function Ht(t){return t===window?Xt.scrollWidth-Xt.clientWidth:t.scrollWidth-t.clientWidth}function Ot(t){return t===window?Xt.scrollHeight-Xt.clientHeight:t.scrollHeight-t.clientHeight}function Gt(t,e){if(e=e||{},t===window)e.width=Xt.clientWidth,e.height=Xt.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),s=t.clientLeft||Ct(t,\"border-left-width\"),n=t.clientTop||Ct(t,\"border-top-width\");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+s,e.right=e.left+e.width,e.top=i.top+n,e.bottom=e.top+e.height}return e}function Wt(t){return t.getGrid()._settings.dragAutoScroll}function Nt(t){t._drag&&t._drag._prepareScroll()}function Bt(t){if(t._drag&&t._isActive){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._translateX,e._translateY)}}function Ft(t,e,i,s){return It.value=Math.min(s/2,t),It.offset=Math.max(0,i+2*It.value+s*e-s)/2,It}function Vt(){this.reset()}function zt(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function jt(t,e){this.pool=[],this.createItem=t,this.releaseItem=e}function Qt(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function Ut(t,e){var i=function(t,e){return Qt(t,e)?(Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left))*(Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top)):0}(t,e);return i?i/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}Vt.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},Vt.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},Vt.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?Pt(this.element):qt(this.element):Math.max(0,Math.min(this.value,this.maxValue))},Vt.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=4&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))},Vt.prototype.computeSpeed=(Lt={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(t){var e=this.item,i=Wt(e).speed;return bt(i)?(Lt.direction=this.direction,Lt.threshold=this.threshold,Lt.distance=this.distance,Lt.value=this.value,Lt.maxValue=this.maxValue,Lt.duration=this.duration,Lt.speed=this.speed,Lt.deltaTime=t,Lt.isEnding=this.isEnding,i(e,this.element,Lt)):i}),Vt.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value},Vt.prototype.onStart=function(){var t=this.item,e=Wt(t).onStart;bt(e)&&e(t,this.element,this.direction)},Vt.prototype.onStop=function(){var t=this.item,e=Wt(t).onStop;bt(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()},zt.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},zt.prototype.addRequest=function(t){1&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this},zt.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))},zt.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:Pt(this.element),this.scrollTop=this.requestY?this.requestY.value:qt(this.element)},zt.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scrollTop=this.scrollTop))},jt.prototype.pick=function(){return this.pool.pop()||this.createItem()},jt.prototype.release=function(t){this.releaseItem(t),-1===this.pool.indexOf(t)&&this.pool.push(t)},jt.prototype.reset=function(){this.pool.length=0};var Zt={width:0,height:0,left:0,right:0,top:0,bottom:0},Jt={width:0,height:0,left:0,right:0,top:0,bottom:0};function $t(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new jt((function(){return new Vt}),(function(t){t.reset()})),this._actionPool=new jt((function(){return new zt}),(function(t){t.reset()})),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}$t.AXIS_X=1,$t.AXIS_Y=2,$t.FORWARD=4,$t.BACKWARD=8,$t.LEFT=9,$t.RIGHT=5,$t.UP=10,$t.DOWN=6,$t.smoothSpeed=function(t,e,i){return function(s,n,r){var o=0;if(!r.isEnding)if(r.threshold>0){var a=r.threshold-Math.max(0,r.distance);o=t/r.threshold*a}else o=t;var h=r.speed,l=o;return h===o?l:h<o?(l=h+e*(r.deltaTime/1e3),Math.min(o,l)):(l=h-i*(r.deltaTime/1e3),Math.max(o,l))}},$t.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(t,s,n,r,o,a,h){return e.left=a-.5*i,e.top=h-.5*i,e.width=i,e.height=i,e}},$t.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))},$t.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),St(this._readTick,this._writeTick))},$t.prototype._startTicking=function(){this._isTicking=!0,St(this._readTick,this._writeTick)},$t.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,ft.remove(0,dt),ft.remove(2,ct)},$t.prototype._getItemHandleRect=function(t,e,i){var s=t._drag;if(e){var n=s._dragMoveEvent||s._dragStartEvent,r=e(t,s._clientX,s._clientY,t._width,t._height,n.clientX,n.clientY);i.left=r.left,i.top=r.top,i.width=r.width,i.height=r.height}else i.left=s._clientX,i.top=s._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i},$t.prototype._requestItemScroll=function(t,e,i,s,n,r,o){var a=this._requests[e],h=a[t._id];h?h.element===i&&h.direction===s||h.reset():h=this._requestPool.pick(),h.item=t,h.element=i,h.direction=s,h.threshold=n,h.distance=r,h.maxValue=o,a[t._id]=h},$t.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],s=i[t._id];s&&(s.action&&s.action.removeRequest(s),this._requestPool.release(s),delete i[t._id])},$t.prototype._checkItemOverlap=function(t,e,i){var s=Wt(t),n=bt(s.targets)?s.targets(t):s.targets,r=s.threshold,o=s.safeZone;if(!n||!n.length)return e&&this._cancelItemScroll(t,1),void(i&&this._cancelItemScroll(t,2));var a=this._dragDirections[t._id],h=a[0],l=a[1];if(!h&&!l)return e&&this._cancelItemScroll(t,1),void(i&&this._cancelItemScroll(t,2));for(var _=this._getItemHandleRect(t,s.handle,Zt),d=Jt,c=null,u=null,f=!0,p=!0,m=0,g=0,v=null,y=null,D=0,w=0,S=0,b=null,A=-1/0,T=0,k=0,x=null,R=0,E=0,C=null,L=-1/0,X=0,Y=0,I=null,M=0,P=0,q=0;q<n.length;q++)c=n[q],f=e&&h&&2!==c.axis,p=i&&l&&1!==c.axis,g=c.priority||0,(!f||g<A)&&(!p||g<L)||(u=Mt(c.element||c),w=f?Ht(u):-1,S=p?Ot(u):-1,(w||S)&&((m=Ut(_,d=Gt(u,d)))<=0||(f&&g>=A&&w>0&&(g>A||m>k)&&(y=null,v=Ft(\"number\"==typeof c.threshold?c.threshold:r,o,_.width,d.width),5===h?(D=d.right+v.offset-_.right)<=v.value&&Pt(u)<w&&(y=5):9===h&&(D=_.left-(d.left-v.offset))<=v.value&&Pt(u)>0&&(y=9),null!==y&&(b=u,A=g,T=v.value,k=m,x=y,R=D,E=w)),p&&g>=L&&S>0&&(g>L||m>Y)&&(y=null,v=Ft(\"number\"==typeof c.threshold?c.threshold:r,o,_.height,d.height),6===l?(D=d.bottom+v.offset-_.bottom)<=v.value&&qt(u)<S&&(y=6):10===l&&(D=_.top-(d.top-v.offset))<=v.value&&qt(u)>0&&(y=10),null!==y&&(C=u,L=g,X=v.value,Y=m,I=y,M=D,P=S)))));e&&(b?this._requestItemScroll(t,1,b,x,T,R,E):this._cancelItemScroll(t,1)),i&&(C?this._requestItemScroll(t,2,C,I,X,M,P):this._cancelItemScroll(t,2))},$t.prototype._updateScrollRequest=function(t){for(var e=t.item,i=Wt(e),s=bt(i.targets)?i.targets(e):i.targets,n=s&&s.length||0,r=i.threshold,o=i.safeZone,a=this._getItemHandleRect(e,i.handle,Zt),h=Jt,l=null,_=null,d=!1,c=null,u=null,f=null,p=null,m=null,g=0;g<n;g++)if((_=Mt((l=s[g]).element||l))===t.element){if(d=!!(1&t.direction)){if(2===l.axis)continue}else if(1===l.axis)continue;if((p=d?Ht(_):Ot(_))<=0)break;if(Ut(a,h=Gt(_,h))<=0)break;if(c=Ft(\"number\"==typeof l.threshold?l.threshold:r,o,d?a.width:a.height,d?h.width:h.height),(u=9===t.direction?a.left-(h.left-c.offset):5===t.direction?h.right+c.offset-a.right:10===t.direction?a.top-(h.top-c.offset):h.bottom+c.offset-a.bottom)>c.value)break;if(f=d?Pt(_):qt(_),m=4&t.direction?f>=p:f<=0)break;return t.maxValue=p,t.threshold=c.value,t.distance=u,t.isEnding=!1,!0}return!0===i.smoothStop&&t.speed>0?(null===m&&(m=t.hasReachedEnd()),t.isEnding=!m):t.isEnding=!1,t.isEnding},$t.prototype._updateRequests=function(){for(var t,e,i,s,n,r,o,a=this._items,h=this._requests[1],l=this._requests[2],_=0;_<a.length;_++)t=a[_],n=(s=this._requestOverlapCheck[t._id])>0&&this._tickTime-s>this._overlapCheckInterval,r=!0,(e=h[t._id])&&e.isActive&&(r=!this._updateScrollRequest(e))&&(n=!0,this._cancelItemScroll(t,1)),o=!0,(i=l[t._id])&&i.isActive&&(o=!this._updateScrollRequest(i))&&(n=!0,this._cancelItemScroll(t,2)),n&&(this._requestOverlapCheck[t._id]=0,this._checkItemOverlap(t,r,o))},$t.prototype._requestAction=function(t,e){for(var i=this._actions,s=1===e,n=null,r=0;r<i.length;r++){if(n=i[r],t.element===n.element){if(s?n.requestX:n.requestY)return void this._cancelItemScroll(t.item,e);break}n=null}n||(n=this._actionPool.pick()),n.element=t.element,n.addRequest(t),t.tick(this._tickDeltaTime),i.push(n)},$t.prototype._updateActions=function(){var t,e,i,s,n=this._items,r=this._requests,o=this._actions;for(s=0;s<n.length;s++)t=n[s]._id,e=r[1][t],i=r[2][t],e&&this._requestAction(e,1),i&&this._requestAction(i,2);for(s=0;s<o.length;s++)o[s].computeScrollValues()},$t.prototype._applyActions=function(){var t,e=this._actions,i=this._items;if(e.length){for(t=0;t<e.length;t++)e[t].scroll(),this._actionPool.release(e[t]);for(e.length=0,t=0;t<i.length;t++)Nt(i[t]);for(t=0;t<i.length;t++)Bt(i[t])}},$t.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],s=t._drag._translateX,n=t._drag._translateY;if(e.length){var r=e[0],o=e[1];i[0]=s>r?5:s<r?9:i[0]||0,i[1]=n>o?6:n<o?10:i[1]||0}e[0]=s,e[1]=n},$t.prototype.addItem=function(t){this._isDestroyed||-1===this._items.indexOf(t)&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())},$t.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))},$t.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(-1!==e){var i=t._id;this._requests[1][i]&&(this._cancelItemScroll(t,1),delete this._requests[1][i]),this._requests[2][i]&&(this._cancelItemScroll(t,2),delete this._requests[2][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}},$t.prototype.isItemScrollingX=function(t){var e=this._requests[1][t._id];return!(!e||!e.isActive)},$t.prototype.isItemScrollingY=function(t){var e=this._requests[2][t._id];return!(!e||!e.isActive)},$t.prototype.isItemScrolling=function(t){return this.isItemScrollingX(t)||this.isItemScrollingY(t)},$t.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var Kt=window.Element.prototype,te=Kt.matches||Kt.matchesSelector||Kt.webkitMatchesSelector||Kt.mozMatchesSelector||Kt.msMatchesSelector||Kt.oMatchesSelector||function(){return!1};function ee(t,e){return te.call(t,e)}function ie(t,e){e&&(t.classList?t.classList.add(e):ee(t,\".\"+e)||(t.className+=\" \"+e))}var se=[];function ne(t,e,i){var s=\"number\"==typeof i?i:-1;s<0&&(s=t.length-s+1),t.splice.apply(t,se.concat(s,0,e)),se.length=0}function re(t,e,i){var s=Math.max(0,t.length-1+(i||0));return e>s?s:e<0?Math.max(s+e+1,0):e}function oe(t,e,i){if(!(t.length<2)){var s=re(t,e),n=re(t,i);s!==n&&t.splice(n,0,t.splice(s,1)[0])}}function ae(t,e,i){if(!(t.length<2)){var s,n=re(t,e),r=re(t,i);n!==r&&(s=t[n],t[n]=t[r],t[r]=s)}}var he=X(document.documentElement.style,\"transform\")||\"transform\",le=/([A-Z])/g,_e=/^(webkit-|moz-|ms-|o-)/,de=/^(-m-s-)/;function ce(t){var e=t.replace(le,\"-$1\").toLowerCase();return e=(e=e.replace(_e,\"-$1\")).replace(de,\"-ms-\")}var ue=ce(he);function fe(t){var e=Et(t,ue);if(!e||\"none\"===e)return!1;var i=Et(t,\"display\");return\"inline\"!==i&&\"none\"!==i}function pe(t){for(var e=document,i=t||e;i&&i!==e&&\"static\"===Et(i,\"position\")&&!fe(i);)i=i.parentElement||e;return i}var me={},ge={},ve={};function ye(t,e){var i,s=e||{};return s.left=0,s.top=0,t===document?s:(s.left=window.pageXOffset||0,s.top=window.pageYOffset||0,t.self===window.self||(i=t.getBoundingClientRect(),s.left+=i.left,s.top+=i.top,s.left+=Ct(t,\"border-left-width\"),s.top+=Ct(t,\"border-top-width\")),s)}function De(t,e,i){return ve.left=0,ve.top=0,t===e||i&&(t=pe(t))===(e=pe(e))||(ye(t,me),ye(e,ge),ve.left=ge.left-me.left,ve.top=ge.top-me.top),ve}function we(t,e){e&&(t.classList?t.classList.remove(e):ee(t,\".\"+e)&&(t.className=(\" \"+t.className+\" \").replace(\" \"+e+\" \",\" \").trim()))}var Se=!M||{capture:!0,passive:!0};function be(t){var e=t._element,i=t.getGrid(),s=i._settings;this._item=t,this._rootGridId=i._id,this._isDestroyed=!1,this._isMigrated=!1,this._startPredicateState=0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._dragger=new V(\"string\"==typeof s.dragHandle&&e.querySelector(s.dragHandle)||e,s.dragCssProps,s.dragEventListenerOptions),this._dragger.on(\"start\",this._preStartCheck),this._dragger.on(\"move\",this._preStartCheck),this._dragger.on(\"cancel\",this._preEndCheck),this._dragger.on(\"end\",this._preEndCheck)}be.autoScroller=new $t,be.defaultStartPredicate=function(t,e,i){if(!e.isFinal){var s=t._drag;if(e.isFirst&&e.srcEvent.button)return s._resetDefaultStartPredicate(),!1;if(!T&&e.isFirst&&!0===e.srcEvent.isTrusted&&!1===e.srcEvent.defaultPrevented&&!1===e.srcEvent.cancelable)return s._resetDefaultStartPredicate(),!1;var n=s._startPredicateData;if(!n){var r=i||t.getGrid()._settings.dragStartPredicate||{};n=s._startPredicateData={distance:Math.max(r.distance,0)||0,delay:Math.max(r.delay,0)||0}}if(n.delay)return n.event=e,void(n.delayTimer||(n.delayTimer=window.setTimeout((function(){s._startPredicateData===n&&(s._isDestroyed?s._resetDefaultStartPredicate():(n.delay=0,1===s._startPredicateState&&n.event.distance>=n.distance&&(s._resetDefaultStartPredicate(),s._startPredicateState=2,s._onStart(n.event))))}),n.delay)));if(!(e.distance<n.distance))return!0}},be.defaultSortPredicate=function(){var t={},e={},n={},r=[];return function(o,a){var h=o._drag,l=a&&\"number\"==typeof a.threshold?a.threshold:50,_=a&&a.action===i?i:s,d=a&&a.migrateAction===i?i:s;l=Math.min(Math.max(l,1),100),t.width=o._width,t.height=o._height,t.left=h._clientX,t.top=h._clientY;var c=function(i,s){var n,o,a,h,l,_,d,c,u,f,p=null,m=i.getGrid(),g=m._settings.dragSort,v=-1;if(!0===g?(r[0]=m,o=r):bt(g)&&(o=g.call(m,i)),!o||!Array.isArray(o)||!o.length)return p;for(f=0;f<o.length;f++)if(!(a=o[f])._isDestroyed){for(a._updateBoundingRect(),_=Math.max(0,a._left),d=Math.max(0,a._top),c=Math.min(window.innerWidth,a._right),u=Math.min(window.innerHeight,a._bottom),h=a._element.parentNode;h&&h!==document&&h!==document.documentElement&&h!==document.body;)if(h.getRootNode&&h instanceof DocumentFragment)h=h.getRootNode().host;else{if(\"visible\"!==Et(h,\"overflow\")&&(l=h.getBoundingClientRect(),_=Math.max(_,l.left),d=Math.max(d,l.top),c=Math.min(c,l.right),u=Math.min(u,l.bottom)),\"fixed\"===Et(h,\"position\"))break;h=h.parentNode}_>=c||d>=u||(e.left=_,e.top=d,e.width=c-_,e.height=u-d,(n=Ut(t,e))>s&&n>v&&(v=n,p=a))}return r.length=0,p}(o,l);if(!c)return null;var u,f,p,m=o.getGrid()!==c,g=0,v=-1,y=!1;for(m?(c._updateBorders(1,0,1,0),t.left=h._clientX-(c._left+c._borderLeft),t.top=h._clientY-(c._top+c._borderTop)):(t.left=h._translateX-o._containerDiffX+o._marginLeft,t.top=h._translateY-o._containerDiffY+o._marginTop),p=0;p<c._items.length;p++)(u=c._items[p])._isActive&&u!==o&&(y=!0,e.width=u._width,e.height=u._height,e.left=u._left+u._marginLeft,e.top=u._top+u._marginTop,(f=Ut(t,e))>g&&(v=p,g=f));return m&&g<l&&(v=y?v:0,g=l),g>=l?(n.grid=c,n.index=v,n.action=m?d:_,n):null}}(),be.prototype.getRootGrid=function(){return t[this._rootGridId]||null},be.prototype.stop=function(){if(this._isActive)if(this._isMigrated)this._finishMigration();else{be.autoScroller.removeItem(this._item);var t=this._item._id;if(gt(t),vt(t),yt(t),this._cancelSort(),this._isStarted){var e=item._element,i=item.getGrid(),s=i._settings.itemDraggingClass;this._unbindScrollHandler(),e.parentNode!==i._element&&(i._element.appendChild(e),item._setTranslate(this._translateX-item._containerDiffX,this._translateY-item._containerDiffY),item._containerDiffX=this._containerDiffX=0,item._containerDiffY=this._containerDiffY=0,s&&element.clientWidth),we(element,s)}this._reset()}},be.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(!0===t?this._handleSort():Dt(e._id,this._handleSort))},be.prototype.destroy=function(){this._isDestroyed||(this._isMigrated=!1,this.stop(),this._dragger.destroy(),this._isDestroyed=!0)},be.prototype._startPredicate=function(t,e){var i=t.getGrid()._settings.dragStartPredicate;return bt(i)?i(t,e):be.defaultStartPredicate(t,e)},be.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragEndEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._translateX=0,this._translateY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},be.prototype._bindScrollHandler=function(){window.addEventListener(\"scroll\",this._onScroll,Se)},be.prototype._unbindScrollHandler=function(){window.removeEventListener(\"scroll\",this._onScroll,Se)},be.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e},be.prototype._checkHeuristics=function(t,e){var i=this._item.getGrid()._settings.dragSortHeuristics,s=i.minDragDistance;if(s<=0)return this._blockedSortIndex=null,!0;var n=t-this._sortX2,r=e-this._sortY2,o=s>3&&i.minBounceBackAngle>0;if(o||(this._blockedSortIndex=null),Math.abs(n)>s||Math.abs(r)>s){if(o){var a=Math.atan2(n,r),h=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(a-h),Math.cos(a-h));Math.abs(l)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1},be.prototype._resetDefaultStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)},be.prototype._handleSort=function(){if(this._isActive){var t=this._item,e=t.getGrid()._settings;if(!e.dragSort||!e.dragAutoScroll.sortDuringScroll&&be.autoScroller.isItemScrolling(t))return this._sortX1=this._sortX2=this._translateX-t._containerDiffX,this._sortY1=this._sortY2=this._translateY-t._containerDiffY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));var i=this._checkHeuristics(this._translateX-t._containerDiffX,this._translateY-t._containerDiffY);if(this._isSortNeeded||i){var s=e.dragSortHeuristics.sortInterval;s<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,s))}}},be.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,Dt(this._item._id,this._handleSort)},be.prototype._cancelSort=function(){var t;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),t=this._item._id,ft.remove(1,rt+t)},be.prototype._finishSort=function(){var t=this._item.getGrid()._settings.dragSort,e=t&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),e&&this._checkOverlap(),t&&this._checkOverlap(!0)},be.prototype._checkOverlap=function(t){if(this._isActive){var e,n,r,o,a,h,l,_,m,g,v,y,D=this._item,w=D._element,S=D.getGrid()._settings;if(bt(S.dragSortPredicate)?e=S.dragSortPredicate(D,t?this._dragEndEvent:this._dragMoveEvent):t||(e=be.defaultSortPredicate(D,S.dragSortPredicate)),e&&\"number\"==typeof e.index&&(_=e.action===i?i:s,y=(n=D.getGrid())!==(o=e.grid||n),r=n._items.indexOf(D),a=re(o._items,e.index,y&&_===s?1:0),y||a!==this._blockedSortIndex))if(y){if(this._blockedSortIndex=null,h=o._items[a],l=o._settings,n._hasListeners(u)&&n._emit(u,{item:D,fromGrid:n,fromIndex:r,toGrid:o,toIndex:a}),o._hasListeners(p)&&o._emit(p,{item:D,fromGrid:n,fromIndex:r,toGrid:o,toIndex:a}),!this._isActive||n._isDestroyed||o._isDestroyed)return;D._gridId=o._id,this._isMigrated=D._gridId!==this._rootGridId,n._items.splice(r,1),ne(o._items,D,a),D._sortData=null,m=this._container,v=De(g=l.dragContainer||o._element,o._element,!0),D._containerDiffX=this._containerDiffX=v.left,D._containerDiffY=this._containerDiffY=v.top,g!==m&&(v=De(m,g,!0),this._containingBlock=pe(g),this._container=g,this._translateX-=v.left,this._translateY-=v.top,g.appendChild(w),D._setTranslate(this._translateX,this._translateY)),S.itemClass!==l.itemClass&&(we(w,S.itemClass),ie(w,l.itemClass)),S.itemDraggingClass!==l.itemDraggingClass&&(we(w,S.itemDraggingClass),ie(w,l.itemDraggingClass)),D._isActive?(S.itemVisibleClass!==l.itemVisibleClass&&(we(w,S.itemVisibleClass),ie(w,l.itemVisibleClass)),D._visibility.setStyles(l.visibleStyles)):(S.itemHiddenClass!==l.itemHiddenClass&&(we(w,S.itemHiddenClass),ie(w,l.itemHiddenClass)),D._visibility.setStyles(l.hiddenStyles)),D._dragPlaceholder&&D._dragPlaceholder.updateClassName(l.itemPlaceholderClass),D._refreshDimensions(),n._hasListeners(c)&&n._emit(c,{item:D,fromGrid:n,fromIndex:r,toGrid:o,toIndex:a}),o._hasListeners(f)&&o._emit(f,{item:D,fromGrid:n,fromIndex:r,toGrid:o,toIndex:a}),_===i&&h&&h.isActive()&&o._items.indexOf(h)>-1&&o.send(h,n,r,{appendTo:m||document.body,layoutSender:!1,layoutReceiver:!1}),n.layout(),o.layout()}else r!==a&&(this._blockedSortIndex=r,(_===i?ae:oe)(n._items,r,a),n._hasListeners(d)&&n._emit(d,{item:D,fromIndex:r,toIndex:a,action:_}),n.layout())}},be.prototype._finishMigration=function(){var t=this._item;this.destroy(),t._drag=t.getGrid()._settings.dragEnabled?new be(t):null,t._dragRelease.start()},be.prototype._preStartCheck=function(t){if(0===this._startPredicateState&&(this._startPredicateState=1),1===this._startPredicateState){var e=this._startPredicate(this._item,t);!0===e?(this._startPredicateState=2,this._onStart(t)):!1===e&&(this._startPredicateState=0,this._dragger._reset())}else 2===this._startPredicateState&&this._isActive&&this._onMove(t)},be.prototype._preEndCheck=function(t){var e=2===this._startPredicateState;this._startPredicate(this._item,t),this._resetDefaultStartPredicate(),this._startPredicateState=0,e&&this._isActive&&(this._isStarted?this._onEnd(t):this.stop())},be.prototype._onStart=function(t){var e,i,s,n=this._item;n._isActive&&(this._isActive=!0,this._dragStartEvent=t,be.autoScroller.addItem(n),e=n._id,i=this._prepareStart,s=this._applyStart,ft.add(0,K+e,i),ft.add(2,tt+e,s))},be.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=t.getGrid(),s=i._settings.dragContainer||i._element,n=pe(s),r=t._getTranslate(),o=e.getBoundingClientRect();if(this._container=s,this._containingBlock=n,this._clientX=o.left,this._clientY=o.top,this._translateX=r.x,this._translateY=r.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._containerDiffX=this._containerDiffY=0,s!==i._element){var a=De(n,i._element);this._containerDiffX=a.left,this._containerDiffY=a.top}this._resetHeuristics(this._translateX-t._containerDiffX,this._translateY-t._containerDiffY)}}},be.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t.getGrid(),i=t._element,s=t._dragRelease,n=t._migrate;t.isPositioning()&&t._layout.stop(!0,this._translateX,this._translateY),n._isActive&&(this._translateX-=t._containerDiffX,this._translateY-=t._containerDiffY,n.stop(!0,this._translateX,this._translateY)),t.isReleasing()&&s._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit(\"dragInit\",t,this._dragStartEvent),i.parentNode!==this._container&&(this._translateX+=this._containerDiffX,this._translateY+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._translateX,this._translateY)),t._containerDiffX=this._containerDiffX,t._containerDiffY=this._containerDiffY,ie(i,e._settings.itemDraggingClass),this._bindScrollHandler(),e._emit(\"dragStart\",t,this._dragStartEvent)}}},be.prototype._onMove=function(t){var e,i,s,n=this._item;n._isActive?(this._dragMoveEvent=t,e=n._id,i=this._prepareMove,s=this._applyMove,ft.add(0,et+e,i),ft.add(2,it+e,s),Dt(n._id,this._handleSort)):this.stop()},be.prototype._prepareMove=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t.getGrid()._settings.dragAxis,i=this._dragMoveEvent,s=this._dragPrevMoveEvent||this._dragStartEvent||i;if(\"y\"!==e){var n=i.clientX-s.clientX;this._translateX=this._translateX-this._moveDiffX+n,this._clientX=this._clientX-this._moveDiffX+n,this._moveDiffX=n}if(\"x\"!==e){var r=i.clientY-s.clientY;this._translateY=this._translateY-this._moveDiffY+r,this._clientY=this._clientY-this._moveDiffY+r,this._moveDiffY=r}this._dragPrevMoveEvent=i}}},be.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._translateX,this._translateY),t.getGrid()._emit(\"dragMove\",t,this._dragMoveEvent),be.autoScroller.updateItem(t))}},be.prototype._onScroll=function(t){var e,i,s,n=this._item;n._isActive?(this._scrollEvent=t,e=n._id,i=this._prepareScroll,s=this._applyScroll,ft.add(0,st+e,i),ft.add(2,nt+e,s),Dt(n._id,this._handleSort)):this.stop()},be.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=t.getGrid(),s=i._settings.dragAxis,n=e.getBoundingClientRect();if(this._container!==i._element){var r=De(this._containingBlock,i._element);t._containerDiffX=this._containerDiffX=r.left,t._containerDiffY=this._containerDiffY=r.top}if(\"y\"!==s){var o=this._clientX-this._moveDiffX-this._scrollDiffX-n.left;this._translateX=this._translateX-this._scrollDiffX+o,this._scrollDiffX=o}if(\"x\"!==s){var a=this._clientY-this._moveDiffY-this._scrollDiffY-n.top;this._translateY=this._translateY-this._scrollDiffY+a,this._scrollDiffY=a}}}},be.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._translateX,this._translateY),t.getGrid()._emit(\"dragScroll\",t,this._scrollEvent))}},be.prototype._onEnd=function(t){var e=this._item;e._isActive?(this._dragEndEvent=t,gt(e._id),vt(e._id),yt(e._id),this._finishSort(),this._unbindScrollHandler(),this._reset(),we(e._element,e.getGrid()._settings.itemDraggingClass),be.autoScroller.removeItem(e),e.getGrid()._emit(\"dragEnd\",e,t),this._isMigrated?this._finishMigration():e._dragRelease.start()):this.stop()};var Ae=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Te={};function ke(t){var e=Te[t];return e||((e=t.replace(Ae,\"\"))!==t&&(e=e[0].toLowerCase()+e.slice(1)),Te[t]=e,e)}function xe(t,e){for(var i in e)t.style[i]=e[i]}var Re,Ee,Ce=!(!Element||!bt(Element.prototype.animate)),Le=!!(Element&&(Re=Element.prototype.animate,Ee=window.Symbol,Re&&bt(Ee)&&bt(Ee.toString)&&Ee(Re).toString().indexOf(\"[native code]\")>-1));function Xe(t){this._element=t,this._animation=null,this._callback=null,this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function Ye(t,e){var i={};for(var s in t)i[e?s:ke(s)]=t[s];return i}function Ie(t,e){return\"translateX(\"+t+\"px) translateY(\"+e+\"px)\"}Xe.prototype.start=function(t,e,i){if(!this._isDestroyed){var s=this._element,n=i||{};if(!Ce)return xe(s,e),this._callback=bt(n.onFinish)?n.onFinish:null,void this._onFinish();this._animation&&this._animation.cancel(),this._callback=bt(n.onFinish)?n.onFinish:null,this._animation=s.animate([Ye(t,Le),Ye(e,Le)],{duration:n.duration||300,easing:n.easing||\"ease\"}),this._animation.onfinish=this._onFinish,xe(s,e)}},Xe.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null)},Xe.prototype.isAnimating=function(){return!!this._animation},Xe.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},Xe.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,t&&t()};var Me={},Pe=/^matrix3d/,qe=/([^,]*,){4}/,He=/([^,]*,){12}/,Oe=/[^,]*,/;function Ge(t){Me.x=0,Me.y=0;var e=Et(t,ue);if(!e||\"none\"===e)return Me;var i=Pe.test(e),s=e.replace(i?He:qe,\"\"),n=s.replace(Oe,\"\");return Me.x=parseFloat(s)||0,Me.y=parseFloat(n)||0,Me}var We={},Ne={};function Be(t){this._item=t,this._animation=new Xe,this._element=null,this._className=\"\",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}Be.prototype._updateDimensions=function(){this.isActive()&&xe(this._element,{width:this._item._width+\"px\",height:this._item._height+\"px\"})},Be.prototype._onLayoutStart=function(t,e){var i=this._item;if(-1!==t.indexOf(i)){var s=i._left,n=i._top,r=this._left,o=this._top;if(this._left=s,this._top=n,e||this._didMigrate||r!==s||o!==n){var a,h,l,_=s+i._marginLeft,d=n+i._marginTop,c=i.getGrid();if(!(!e&&c._settings.layoutDuration>0)||this._didMigrate)return wt(i._id),this._element.style[he]=Ie(_,d),this._animation.stop(),void(this._didMigrate&&(c.getElement().appendChild(this._element),this._didMigrate=!1));this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._nextTransX=_,this._nextTransY=d,a=i._id,h=this._setupAnimation,l=this._startAnimation,ft.add(0,ht+a,h),ft.add(2,lt+a,l)}}else this.reset()},Be.prototype._setupAnimation=function(){if(this.isActive()){var t=Ge(this._element);this._transX=t.x,this._transY=t.y}},Be.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,s=this._nextTransX,n=this._nextTransY;if(e!==s||i!==n){var r=this._item.getGrid()._settings;We[he]=Ie(e,i),Ne[he]=Ie(s,n),t.start(We,Ne,{duration:r.layoutDuration,easing:r.layoutEasing,onFinish:this._onLayoutEnd})}else t.isAnimating()&&(this._element.style[he]=Ie(s,n),t.stop())}},Be.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},Be.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},Be.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(m,this._onReleaseEnd),e.off(n,this._onLayoutStart),e.off(u,this._onMigrate),e.off(h,this._onHide),i.on(m,this._onReleaseEnd),i.on(n,this._onLayoutStart),i.on(u,this._onMigrate),i.on(h,this._onHide),this._didMigrate=!0}},Be.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()},Be.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var t,e=this._item,i=e.getGrid(),s=i._settings,r=this._animation;this._left=e._left,this._top=e._top,t=bt(s.dragPlaceholder.createElement)?s.dragPlaceholder.createElement(e):document.createElement(\"div\"),this._element=t,r._element=t,this._className=s.itemPlaceholderClass||\"\",this._className&&ie(t,this._className),xe(t,{position:\"absolute\",left:\"0px\",top:\"0px\",width:e._width+\"px\",height:e._height+\"px\"}),t.style[he]=Ie(e._left+e._marginLeft,e._top+e._marginTop),i.on(n,this._onLayoutStart),i.on(m,this._onReleaseEnd),i.on(u,this._onMigrate),i.on(h,this._onHide),bt(s.dragPlaceholder.onCreate)&&s.dragPlaceholder.onCreate(e,t),i.getElement().appendChild(t)}},Be.prototype.reset=function(){if(this.isActive()){var t,e=this._element,i=this._item,s=i.getGrid(),r=s._settings,o=this._animation;this._resetAfterLayout=!1,wt(i._id),t=i._id,ft.remove(2,_t+t),o.stop(),o._element=null,s.off(m,this._onReleaseEnd),s.off(n,this._onLayoutStart),s.off(u,this._onMigrate),s.off(h,this._onHide),this._className&&(we(e,this._className),this._className=\"\"),e.parentNode.removeChild(e),this._element=null,bt(r.dragPlaceholder.onRemove)&&r.dragPlaceholder.onRemove(i,e)}},Be.prototype.isActive=function(){return!!this._element},Be.prototype.getElement=function(){return this._element},Be.prototype.updateDimensions=function(){var t,e;this.isActive()&&(t=this._item._id,e=this._updateDimensions,ft.add(2,_t+t,e))},Be.prototype.updateClassName=function(t){this.isActive()&&(we(this._element,this._className),this._className=t,ie(this._element,t))},Be.prototype.destroy=function(){this.reset(),this._animation&&this._animation.destroy(),this._item=this._animation=null};var Fe=!M||{capture:!0,passive:!0};function Ve(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._onScroll=this._onScroll.bind(this)}Ve.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,ie(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer?t._element.parentNode!==e._element&&window.addEventListener(\"scroll\",this._onScroll,Fe):this._placeToGrid(),e._emit(\"dragReleaseStart\",t),e._nextLayoutData||t._layout.start(!1)}},Ve.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s=this._item,n=s.getGrid();t||void 0!==e&&void 0!==i||(e=s._left,i=s._top);var r=this._placeToGrid(e,i);this._reset(r),t||n._emit(m,s)}},Ve.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},Ve.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},Ve.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,n=i.getGrid()._element,r=!1;if(s.parentNode!==n){if(void 0===t||void 0===e){var o=i._getTranslate();t=o.x-i._containerDiffX,e=o.y-i._containerDiffY}n.appendChild(s),i._setTranslate(t,e),i._containerDiffX=0,i._containerDiffY=0,r=!0}return r}},Ve.prototype._reset=function(t){if(!this._isDestroyed){var e,i=this._item,s=i.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,e=i._id,ft.remove(0,ot+e),ft.remove(2,at+e),window.removeEventListener(\"scroll\",this._onScroll,Fe),s&&(t&&i._element.clientWidth,we(i._element,s))}},Ve.prototype._onScroll=function(){if(!this._isDestroyed&&this._isActive){var t,e,i,s=this,n=this._item,r=0,o=0;t=n._id,e=function(){if(s._isActive){var t=De(n._element.parentNode,n.getGrid()._element,!0);r=t.left,o=t.top}},i=function(){s._isActive&&(Math.abs(r-n._containerDiffX)>.1||Math.abs(o-n._containerDiffY)>.1)&&(n._containerDiffX=r,n._containerDiffY=o,n._dragPlaceholder&&n._dragPlaceholder.reset(),n._layout.stop(!0,n._left,n._top),s.stop(!1,n._left,n._top))},ft.add(0,ot+t,e),ft.add(2,at+t,i)}};var ze={},je={},Qe={};function Ue(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._skipNextAnimation=!1,this._easing=\"\",this._duration=0,this._tX=0,this._tY=0,this._animation=new Xe(e),this._queue=\"layout-\"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._finish=this._finish.bind(this),i.left=\"0px\",i.top=\"0px\",t._setTranslate(0,0)}function Ze(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1}function Je(t){var e=t._isActive,i=t._element,s=i.children[0],n=t.getGrid()._settings;if(!s)throw new Error(\"No valid child element found within item element.\");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=s,this._currentStyleProps=[],this._animation=new Xe(s),this._queue=\"visibility-\"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?\"\":\"none\",ie(i,e?n.itemVisibleClass:n.itemHiddenClass),this.setStyles(e?n.visibleStyles:n.hiddenStyles)}Ue.prototype.start=function(t,e){if(!this._isDestroyed){var i,s,n,r=this._item,o=r._dragRelease,a=r.getGrid(),h=a._settings,l=this._isActive,_=o.isJustReleased(),d=this._animation,c=_?h.dragRelease.duration:h.layoutDuration,u=_?h.dragRelease.easing:h.layoutEasing,f=!t&&!this._skipNextAnimation&&c>0;if(l&&(pt(r._id),r._emitter.burst(this._queue,!0,r)),_&&(o._isPositioningStarted=!0),bt(e)&&r._emitter.on(this._queue,e),this._skipNextAnimation=!1,!f)return r._setTranslate(r._left+r._containerDiffX,r._top+r._containerDiffY),d.stop(),void this._finish();d.isAnimating()&&(d._animation.onfinish=null),a._itemLayoutNeedsDimensionRefresh=!0,this._isActive=!0,this._easing=u,this._duration=c,this._isInterrupted=l,i=r._id,s=this._setupAnimation,n=this._startAnimation,ft.add(0,U+i,s),ft.add(2,Z+i,n)}},Ue.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s=this._item;if(pt(s._id),this._animation.isAnimating()){if(void 0===e||void 0===i){var n=Ge(s._element);s._setTranslate(n.x,n.y)}else s._setTranslate(e,i);this._animation.stop()}we(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&s._emitter.burst(this._queue,!0,s)}},Ue.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[he]=\"\",t.left=\"\",t.top=\"\",this._item=null,this._isDestroyed=!0}},Ue.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._translateX=t._left+t._containerDiffX,t._translateY=t._top+t._containerDiffY,this._isActive&&(this._isActive=!1,we(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}},Ue.prototype._setupAnimation=function(){if(!this._isDestroyed&&this._isActive){var t=this._item,e=t.getGrid(),i=t._getTranslate();this._tX=i.x,this._tY=i.y,e._settings._animationWindowing&&e._itemLayoutNeedsDimensionRefresh&&(e._itemLayoutNeedsDimensionRefresh=!1,e._updateBoundingRect(),e._updateBorders(1,0,1,0))}},Ue.prototype._startAnimation=function(){if(!this._isDestroyed&&this._isActive){var t=this._item,e=t.getGrid()._settings,i=this._duration<=0,s=t._left+t._containerDiffX,n=t._top+t._containerDiffY,r=Math.abs(t._left-(this._tX-t._containerDiffX)),o=Math.abs(t._top-(this._tY-t._containerDiffY));if(i||r<2&&o<2||e._animationWindowing&&!t._isInViewport(this._tX,this._tY,k)&&!t._isInViewport(s,n,k))return(this._isInterrupted||r>.1||o>.1)&&t._setTranslate(s,n),this._animation.stop(),void this._finish();this._isInterrupted||ie(t._element,e.itemPositioningClass),ze[he]=Ie(this._tX,this._tY),je[he]=Ie(s,n),Qe.duration=this._duration,Qe.easing=this._easing,Qe.onFinish=this._finish,t._translateX=t._translateY=void 0,this._animation.start(ze,je,Qe),Qe.onFinish=null}},Ze.prototype.start=function(t,e,i){if(!this._isDestroyed){var s,n,r,o,a,h,l,_,d,m,g=this._item,v=g._element,y=g.isActive(),D=g.isVisible(),w=g.getGrid(),S=w._settings,b=t._settings,A=t._element,T=t._items,k=w._items.indexOf(g),x=i||document.body;if(\"number\"==typeof e)s=re(T,e,1);else{if(!(n=t.getItem(e)))return;s=T.indexOf(n)}g._drag&&g._drag.stop(),(this._isActive||g.isPositioning()||g.isReleasing())&&(d=(_=g._getTranslate()).x,m=_.y,g.isPositioning()&&g._layout.stop(!0,d,m),d-=g._containerDiffX,m-=g._containerDiffY,this._isActive?this.stop(!0,d,m):g.isReleasing()&&g._dragRelease.stop(!0,d,m)),g._visibility.stop(!0),w._hasListeners(u)&&w._emit(u,{item:g,fromGrid:w,fromIndex:k,toGrid:t,toIndex:s}),t._hasListeners(p)&&t._emit(p,{item:g,fromGrid:w,fromIndex:k,toGrid:t,toIndex:s}),g._isDestroyed||w._isDestroyed||t._isDestroyed||(g._drag&&(g._drag.destroy(),g._drag=null),S.itemClass!==b.itemClass&&(we(v,S.itemClass),ie(v,b.itemClass)),(h=D?S.itemVisibleClass:S.itemHiddenClass)!==(l=D?b.itemVisibleClass:b.itemHiddenClass)&&(we(v,h),ie(v,l)),w._items.splice(k,1),ne(T,g,s),g._gridId=t._id,y?x!==(r=v.parentNode)&&(x.appendChild(v),o=De(x,r,!0),_=g._getTranslate(),g._setTranslate(_.x+o.left,_.y+o.top)):A.appendChild(v),g._visibility.setStyles(D?b.visibleStyles:b.hiddenStyles),y&&(a=De(x,A,!0),g._containerDiffX=a.left,g._containerDiffY=a.top),g._refreshDimensions(),g._sortData=null,b.dragEnabled&&(g._drag=new be(g)),y?(this._isActive=!0,this._container=x):(this._isActive=!1,this._container=null),w._hasListeners(c)&&w._emit(c,{item:g,fromGrid:w,fromIndex:k,toGrid:t,toIndex:s}),t._hasListeners(f)&&t._emit(f,{item:g,fromGrid:w,fromIndex:k,toGrid:t,toIndex:s}))}},Ze.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var s=this._item,n=s.getGrid()._element;if(this._container!==n){if(void 0===e||void 0===i)if(t){var r=s._getTranslate();e=r.x-s._containerDiffX,i=r.y-s._containerDiffY}else e=s._left,i=s._top;n.appendChild(s._element),s._setTranslate(e,i),s._containerDiffX=0,s._containerDiffY=0}this._isActive=!1,this._container=null}},Ze.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},Je.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,n=bt(e)?e:null,r=i.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||t?(this._isShowing||(i._emitter.burst(this._queue,!0,i),we(s,r.itemHiddenClass),ie(s,r.itemVisibleClass),this._isHiding||(s.style.display=\"\")),n&&i._emitter.on(this._queue,n),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)):n&&i._emitter.on(this._queue,n):n&&n(!1,i)}},Je.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,s=i._element,n=bt(e)?e:null,r=i.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||t?(this._isHiding||(i._emitter.burst(this._queue,!0,i),ie(s,r.itemHiddenClass),we(s,r.itemVisibleClass)),n&&i._emitter.on(this._queue,n),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)):n&&i._emitter.on(this._queue,n):n&&n(!1,i)}},Je.prototype.stop=function(t){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var e=this._item;mt(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}},Je.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;for(var s in this._removeCurrentStyles(),t)i.push(s),e.style[s]=t[s]},Je.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid()._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),we(e,i.itemVisibleClass),we(e,i.itemHiddenClass),e.style.display=\"\",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},Je.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var s,n,r,o,a,h,l=this,_=this._item,d=this._animation,c=this._childElement,u=_.getGrid(),f=u._settings,p=t?f.visibleStyles:f.hiddenStyles,m=t?f.showDuration:f.hideDuration,g=t?f.showEasing:f.hideEasing,v=e||m<=0;if(!p)return d.stop(),void(i&&i());if(mt(_._id),v)return xe(c,p),d.stop(),void(i&&i());d.isAnimating()&&(d._animation.onfinish=null),u._itemVisibilityNeedsDimensionRefresh=!0,o=_._id,a=function(){if(!l._isDestroyed&&(t?l._isShowing:l._isHiding)){s=function(t,e){var i,s,n={};if(Array.isArray(e))for(s=0;s<e.length;s++)n[i=e[s]]=Et(t,ce(i));else for(i in e)n[i]=Et(t,ce(i));return n}(c,p);var e=_._getTranslate();n=e.x,r=e.y,f._animationWindowing&&u._itemVisibilityNeedsDimensionRefresh&&(u._itemVisibilityNeedsDimensionRefresh=!1,u._updateBoundingRect(),u._updateBorders(1,0,1,0))}},h=function(){if(!l._isDestroyed&&(t?l._isShowing:l._isHiding))return!f._animationWindowing||_._isInViewport(n,r,k)||_.isActive()&&_._isInViewport(_._left+_._containerDiffX,_._top+_._containerDiffY,k)?void d.start(s,p,{duration:m,easing:g,onFinish:i}):(xe(c,p),d.stop(),void(i&&i()))},ft.add(0,J+o,a),ft.add(2,$+o,h)}},Je.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},Je.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display=\"none\",t._emitter.burst(this._queue,!1,t)}},Je.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;i++)t.style[e[i]]=\"\";e.length=0};var $e=0;function Ke(){return++$e}var ti={width:window.innerWidth,height:window.innerHeight};window.addEventListener(\"resize\",(function(){ti.width=window.innerWidth,ti.height=window.innerHeight}));var ei,ii,si={left:0,top:0,width:0,height:0},ni={left:0,top:0,width:0,height:0};function ri(t,i,s){var n=t._settings;if(e){if(e.has(i))throw new Error(\"You can only create one Muuri Item per element!\");e.set(i,this)}this._id=Ke(),this._gridId=t._id,this._element=i,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._translateX=void 0,this._translateY=void 0,this._containerDiffX=0,this._containerDiffY=0,this._sortData=null,this._emitter=new x,i.parentNode!==t._element&&t._element.appendChild(i),ie(i,n.itemClass),\"boolean\"!=typeof s&&(s=\"none\"!==Et(i,\"display\")),this._isActive=s,this._visibility=new Je(this),this._layout=new Ue(this),this._migrate=new Ze(this),this._drag=n.dragEnabled?new be(this):null,this._dragRelease=new Ve(this),this._dragPlaceholder=new Be(this)}function oi(t){var e,i,s,n,r,o=.001,a=.5;function h(t){return((1e3*t+.5<<0)/10<<0)/100}function l(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(l.prototype.computeLayout=function(t,e){var i,s,n,r,o,a,l=t.items,_=t.slots,d=!!(1&e),c=!!(2&e),u=!!(4&e),f=!!(8&e),p=!!(16&e),m=\"number\"==typeof l[0];if(!l.length)return t;for(s=m?2:1,i=0;i<l.length;i+=s)m?(r=l[i],o=l[i+1]):(r=(n=l[i])._width+n._marginLeft+n._marginRight,o=n._height+n._marginTop+n._marginBottom),p&&(r=h(r),o=h(o)),a=this.computeNextSlot(t,r,o,d,c),c?a.left+a.width>t.width&&(t.width=a.left+a.width):a.top+a.height>t.height&&(t.height=a.top+a.height),_[++this.slotIndex]=a.left,_[++this.slotIndex]=a.top,(u||f)&&this.slotSizes.push(a.width,a.height);if(u)for(i=0;i<_.length;i+=2)_[i]=t.width-(_[i]+this.slotSizes[i]);if(f)for(i=1;i<_.length;i+=2)_[i]=t.height-(_[i]+this.slotSizes[i]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectId=0,this.slotIndex=-1,t},l.prototype.computeNextSlot=function(t,e,i,s,n){var r,h,l,_,d,c=this.slotData,u=this.currentRects,f=this.nextRects,p=!1;for(f.length=0,c.left=null,c.top=null,c.width=e,c.height=i,_=0;_<u.length;_++)if((h=u[_])&&(r=this.getRect(h),c.width<=r.width+o&&c.height<=r.height+o)){c.left=r.left,c.top=r.top;break}if(null===c.left&&(n?(c.left=t.width,c.top=0):(c.left=0,c.top=t.height),s||(p=!0)),!n&&c.top+c.height>t.height+o&&(c.left>a&&f.push(this.addRect(0,t.height,c.left,1/0)),c.left+c.width<t.width-a&&f.push(this.addRect(c.left+c.width,t.height,t.width-c.left-c.width,1/0)),t.height=c.top+c.height),n&&c.left+c.width>t.width+o&&(c.top>a&&f.push(this.addRect(t.width,0,1/0,c.top)),c.top+c.height<t.height-a&&f.push(this.addRect(t.width,c.top+c.height,1/0,t.height-c.top-c.height)),t.width=c.left+c.width),!p)for(s&&(_=0);_<u.length;_++)if(h=u[_])for(r=this.getRect(h),l=this.splitRect(r,c),d=0;d<l.length;d++)h=l[d],r=this.getRect(h),(n?r.left+o<t.width-o:r.top+o<t.height-o)&&f.push(h);return f.length>1&&this.purgeRects(f).sort(n?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=f,this.nextRects=u,c},l.prototype.addRect=function(t,e,i,s){var n=++this.rectId;return this.rectStore[n]=t||0,this.rectStore[++this.rectId]=e||0,this.rectStore[++this.rectId]=i||0,this.rectStore[++this.rectId]=s||0,n},l.prototype.getRect=function(t,e){return e||(e=this.rectTarget),e.left=this.rectStore[t]||0,e.top=this.rectStore[++t]||0,e.width=this.rectStore[++t]||0,e.height=this.rectStore[++t]||0,e},l.prototype.splitRect=(e=[],i=0,s=0,function(t,n){return e.length=0,t.left+t.width<=n.left+o||n.left+n.width<=t.left+o||t.top+t.height<=n.top+o||n.top+n.height<=t.top+o?(e.push(this.addRect(t.left,t.top,t.width,t.height)),e):((i=n.left-t.left)>=a&&e.push(this.addRect(t.left,t.top,i,t.height)),(i=t.left+t.width-(n.left+n.width))>=a&&e.push(this.addRect(n.left+n.width,t.top,i,t.height)),(s=n.top-t.top)>=a&&e.push(this.addRect(t.left,t.top,t.width,s)),(s=t.top+t.height-(n.top+n.height))>=a&&e.push(this.addRect(t.left,n.top+n.height,t.width,s)),e)}),l.prototype.isRectAWithinRectB=function(t,e){return t.left+o>=e.left&&t.top+o>=e.top&&t.left+t.width-o<=e.left+e.width&&t.top+t.height-o<=e.top+e.height},l.prototype.purgeRects=(n={},r={},function(t){for(var e,i=t.length;i--;)if(e=t.length,t[i])for(this.getRect(t[i],n);e--;)if(t[e]&&i!==e&&(this.getRect(t[e],r),this.isRectAWithinRectB(n,r))){t[i]=0;break}return t}),l.prototype.sortRectsTopLeft=function(){var t={},e={};return function(i,s){return this.getRect(i,t),this.getRect(s,e),t.top<e.top&&t.top+o<e.top?-1:t.top>e.top&&t.top-o>e.top?1:t.left<e.left&&t.left+o<e.left?-1:t.left>e.left&&t.left-o>e.left?1:0}}(),l.prototype.sortRectsLeftTop=function(){var t={},e={};return function(i,s){return this.getRect(i,t),this.getRect(s,e),t.left<e.left&&t.left+o<e.left?-1:t.left>e.left&&t.left-o<e.left?1:t.top<e.top&&t.top+o<e.top?-1:t.top>e.top&&t.top-o>e.top?1:0}}(),t){var _=new l;self.onmessage=function(t){var e=new Float32Array(t.data),i=e.subarray(4,e.length),s=new Float32Array(i.length),n=e[3],r={items:i,slots:s,width:e[1],height:e[2]};_.computeLayout(r,n),e[1]=r.width,e[2]=r.height,e.set(r.slots,4),postMessage(e.buffer,[e.buffer])}}return l}ri.prototype.getGrid=function(){return t[this._gridId]},ri.prototype.getElement=function(){return this._element},ri.prototype.getWidth=function(){return this._width},ri.prototype.getHeight=function(){return this._height},ri.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},ri.prototype.getPosition=function(){return{left:this._left,top:this._top}},ri.prototype.isActive=function(){return this._isActive},ri.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},ri.prototype.isShowing=function(){return!(!this._visibility||!this._visibility._isShowing)},ri.prototype.isHiding=function(){return!(!this._visibility||!this._visibility._isHiding)},ri.prototype.isPositioning=function(){return!(!this._layout||!this._layout._isActive)},ri.prototype.isDragging=function(){return!(!this._drag||!this._drag._isActive)},ri.prototype.isReleasing=function(){return!(!this._dragRelease||!this._dragRelease._isActive)},ri.prototype.isDestroyed=function(){return this._isDestroyed},ri.prototype._refreshDimensions=function(t){if(!this._isDestroyed&&(!0===t||this.isVisible()||this.isHiding())){var e=this._element,i=this._dragPlaceholder,s=e.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,Ct(e,\"margin-left\")),this._marginRight=Math.max(0,Ct(e,\"margin-right\")),this._marginTop=Math.max(0,Ct(e,\"margin-top\")),this._marginBottom=Math.max(0,Ct(e,\"margin-bottom\")),i&&i.updateDimensions()}},ri.prototype._refreshSortData=function(){if(!this._isDestroyed){var t,e=this._sortData={},i=this.getGrid()._settings.sortData;for(t in i)e[t]=i[t](this,this._element)}},ri.prototype._addToLayout=function(t,e){!0!==this._isActive&&(this._isActive=!0,this._left=t||0,this._top=e||0)},ri.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},ri.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._dragRelease._isActive&&!this._layout._skipNextAnimation},ri.prototype._setTranslate=function(t,e){this._translateX===t&&this._translateY===e||(this._translateX=t,this._translateY=e,this._element.style[he]=Ie(t,e))},ri.prototype._getTranslate=(ei={x:0,y:0},function(){if(void 0===this._translateX||void 0===this._translateY){var t=Ge(this._element);ei.x=t.x,ei.y=t.y}else ei.x=this._translateX,ei.y=this._translateY;return ei}),ri.prototype._getClientRootPosition=(ii={left:0,top:0},function(){var t=this.getGrid();return ii.left=t._left+t._borderLeft-this._containerDiffX,ii.top=t._top+t._borderTop-this._containerDiffY,ii}),ri.prototype._isInViewport=function(t,e,i){var s,n,r,o,a,h=this._getClientRootPosition();return s=this._width,n=this._height,r=h.left+this._marginLeft+t,o=h.top+this._marginTop+e,a=(a=i||0)||0,si.left=r,si.top=o,si.width=s,si.height=n,ni.left=0-a,ni.top=0-a,ni.width=ti.width+a+a,ni.height=ti.height+a+a,Qt(si,ni)},ri.prototype._destroy=function(t){if(!this._isDestroyed){var i=this._element,s=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),we(i,s.itemClass),t&&i.parentNode.removeChild(i),e&&e.delete(i),this._isActive=!1,this._isDestroyed=!0}};var ai=oi(),hi=null,li=[];function _i(t,e){if(this._settings=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.updateSettings(e),(t=\"number\"==typeof t?Math.max(0,t):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(t,e){var i=[];if(t>0){hi||(hi=URL.createObjectURL(new Blob([\"(\"+oi.toString()+\")(true)\"],{type:\"application/javascript\"})));for(var s,n=0;n<t;n++)s=new Worker(hi),e&&(s.onmessage=e),i.push(s),li.push(s)}return i}(t,this._onWorkerMessage)}catch(t){this._processor=new ai}else this._processor=new ai}_i.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}},_i.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[0],s=this._layouts[i],n=this._layoutCallbacks[i],r=this._layoutWorkers[i];s&&delete this._layoutCallbacks[i],n&&delete this._layoutCallbacks[i],r&&delete this._layoutWorkers[i],s&&n&&(s.width=e[1],s.height=e[2],s.slots=e.subarray(4,e.length),this._finalizeLayout(s),n(s)),r&&(this._workers.push(r),this._sendToWorker())},_i.prototype._finalizeLayout=function(t){var e=t._grid,i=2&t._settings,s=\"border-box\"===e._boxSizing;return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(s?t.width+e._borderLeft+e._borderRight:t.width)+\"px\":t.styles.height=(s?t.height+e._borderTop+e._borderBottom:t.height)+\"px\",t},_i.prototype.updateSettings=function(t){if(t){var e=1&this._settings;\"boolean\"==typeof t.fillGaps&&(e=t.fillGaps?1:0);var i=2&this._settings;\"boolean\"==typeof t.horizontal&&(i=t.horizontal?2:0);var s=4&this._settings;\"boolean\"==typeof t.alignRight&&(s=t.alignRight?4:0);var n=8&this._settings;\"boolean\"==typeof t.alignBottom&&(n=t.alignBottom?8:0);var r=16&this._settings;\"boolean\"==typeof t.rounding&&(r=t.rounding?16:0),this._settings=e|i|s|n|r}},_i.prototype.createLayout=function(t,e,i,s,n,r){if(this._layouts[e])throw new Error(\"A layout with the provided id is currently being processed.\");var o=2&this._settings,a={id:e,items:i,slots:null,width:o?0:s,height:o?n:0,_grid:t,_settings:this._settings};if(!i.length)return a.slots=[],this._finalizeLayout(a),void r(a);if(this._processor)return a.slots=window.Float32Array?new Float32Array(2*i.length):new Array(2*i.length),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),void r(a);var h,l,_,d=new Float32Array(4+2*i.length);for(d[0]=e,d[1]=a.width,d[2]=a.height,d[3]=a._settings,h=0,l=3;h<i.length;h++)_=i[h],d[++l]=_._width+_._marginLeft+_._marginRight,d[++l]=_._height+_._marginTop+_._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=r,this._layoutWorkerData[e]=d,this._sendToWorker(),this.cancelLayout.bind(this,e)},_i.prototype.cancelLayout=function(t){if(this._layouts[t]&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var e=this._layoutQueue.indexOf(t);e>-1&&this._layoutQueue.splice(e,1)}},_i.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);!function(t){for(var e,i,s=0;s<t.length;s++)(e=t[s]).onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),(i=li.indexOf(e))>-1&&li.splice(i,1);hi&&!li.length&&(URL.revokeObjectURL(hi),hi=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var di=0;function ci(t,e){var i=++di,s=0,n=0,r=!1,o=function(e){r||(n&&(s-=e-n),n=e,s>0?function(t,e){ft.add(0,ut+t,e)}(i,o):(s=n=0,t()))};return function(a){if(!r){if(!(e<=0))return!0===a?(r=!0,s=n=0,o=void 0,void function(t){ft.remove(0,ut+t)}(i)):void(s<=0?(s=e,o(0)):s=e);!0!==a&&t()}}}function ui(t){var e=Object.prototype.toString.call(t);return\"[object HTMLCollection]\"===e||\"[object NodeList]\"===e}var fi=Object.prototype.toString;function pi(t){return\"object\"==typeof t&&\"[object Object]\"===fi.call(t)}function mi(){}var gi,vi=\"number\",yi=\"string\",Di=\"instant\",wi=0;function Si(e,i){if(typeof e===yi&&(e=document.querySelector(e)),!(e.getRootNode?e.getRootNode({composed:!0})===document:document.body.contains(e))||e===document.documentElement)throw new Error(\"Container element must be an existing DOM element.\");var s=bi(Si.defaultOptions,i);s.visibleStyles=xi(s.visibleStyles),s.hiddenStyles=xi(s.hiddenStyles),this._id=Ke(),this._element=e,this._settings=s,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new x,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),t[this._id]=this,ie(e,s.containerClass),Ti(this,s.layoutOnResize),this.add(function(t,e){if(\"*\"===e)return t.children;if(typeof e===yi){for(var i=[],s=t.children,n=0;n<s.length;n++)ee(s[n],e)&&i.push(s[n]);return i}if(Array.isArray(e)||ui(e))return e;return[]}(e,s.items),{layout:!1}),s.layoutOnInit&&this.layout(!0)}function bi(t,e){var i=Ai({},t);return e&&(i=Ai(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}function Ai(t,e){var i,s,n,r=Object.keys(e),o=r.length;for(n=0;n<o;n++)i=pi(e[s=r[n]]),pi(t[s])&&i?t[s]=Ai(Ai({},t[s]),e[s]):i?t[s]=Ai({},e[s]):Array.isArray(e[s])?t[s]=e[s].slice(0):t[s]=e[s];return t}function Ti(t,e){typeof e!==vi&&(e=!0===e?0:-1),e>=0&&(t._resizeHandler=ci((function(){t.refreshItems().layout()}),e),window.addEventListener(\"resize\",t._resizeHandler))}function ki(t){t._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener(\"resize\",t._resizeHandler),t._resizeHandler=null)}function xi(t){var e,i,s={},n=document.documentElement.style;for(e in t)t[e]&&(i=X(n,e))&&(s[i]=t[e]);return s}function Ri(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function Ei(t,e,i){return t[e._id]-t[i._id]}function Ci(t,e){for(var i in t)if(t[i]!==e[i])return!1;return Object.keys(t).length===Object.keys(e).length}return Si.Item=ri,Si.ItemLayout=Ue,Si.ItemVisibility=Je,Si.ItemMigrate=Ze,Si.ItemDrag=be,Si.ItemDragRelease=Ve,Si.ItemDragPlaceholder=Be,Si.Emitter=x,Si.Animator=Xe,Si.Dragger=V,Si.Packer=_i,Si.AutoScroller=$t,Si.defaultPacker=new _i,Si.defaultOptions={items:\"*\",showDuration:300,showEasing:\"ease\",hideDuration:300,hideEasing:\"ease\",visibleStyles:{opacity:\"1\",transform:\"scale(1)\"},hiddenStyles:{opacity:\"0\",transform:\"scale(0.5)\"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:\"ease\",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:\"xy\",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:s,migrateAction:s},dragRelease:{duration:300,easing:\"ease\",useDragContainer:!0},dragCssProps:{touchAction:\"none\",userSelect:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0, 0, 0, 0)\",touchCallout:\"none\",contentZooming:\"none\"},dragEventListenerOptions:{passive:!0,capture:!1},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:$t.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:\"muuri\",itemClass:\"muuri-item\",itemVisibleClass:\"muuri-item-shown\",itemHiddenClass:\"muuri-item-hidden\",itemPositioningClass:\"muuri-item-positioning\",itemDraggingClass:\"muuri-item-dragging\",itemReleasingClass:\"muuri-item-releasing\",itemPlaceholderClass:\"muuri-item-placeholder\",_animationWindowing:!1},Si.prototype.on=function(t,e){return this._emitter.on(t,e),this},Si.prototype.off=function(t,e){return this._emitter.off(t,e),this},Si.prototype.getElement=function(){return this._element},Si.prototype.getItem=function(t){if(this._isDestroyed||!t&&0!==t)return null;if(typeof t===vi)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof ri)return t._gridId===this._id?t:null;if(e){var i=e.get(t);return i&&i._gridId===this._id?i:null}for(var s=0;s<this._items.length;s++)if(this._items[s]._element===t)return this._items[s];return null},Si.prototype.getItems=function(t){if(this._isDestroyed||void 0===t)return this._items.slice(0);var e,i,s=[];if(Array.isArray(t)||ui(t))for(e=0;e<t.length;e++)(i=this.getItem(t[e]))&&s.push(i);else(i=this.getItem(t))&&s.push(i);return s},Si.prototype.updateSettings=function(t){if(this._isDestroyed||!t)return this;var e,i,s,n,r,o,a=this._settings,h=this._items,l=!1,_=!1,d=!1,c=!1,u=!1,f=!1,p=[],m=!1,g=bi(a,t);for(e in g.visibleStyles=xi(g.visibleStyles),g.hiddenStyles=xi(g.hiddenStyles),this._settings=g,t)switch(i=a[e],s=g[e],e){case\"visibleStyles\":u=!Ci(i,s);break;case\"hiddenStyles\":f=!Ci(i,s);break;case\"dragEnabled\":l=i!==s;break;case\"dragHandle\":_=i!==s;break;case\"dragCssProps\":d=!Ci(i,s);break;case\"dragEventListenerOptions\":c=!Ci(i,s);break;case\"layoutOnResize\":i!==s&&(ki(this),Ti(this,s));break;case\"containerClass\":i!==s&&(we(this._element,i),ie(this._element,s));break;case\"itemClass\":case\"itemVisibleClass\":case\"itemHiddenClass\":case\"itemPositioningClass\":case\"itemDraggingClass\":case\"itemReleasingClass\":case\"itemPlaceholderClass\":i!==s&&p.push(e,i,s)}if(p.length||u||f||l||_||d||c)for(r=0;r<h.length;r++){for(n=h[r],o=0;o<p.length;o+=3){switch(e=p[o],i=p[o+1],s=p[o+2],m=!1,e){case\"itemClass\":m=!0;break;case\"itemVisibleClass\":m=n.isVisible();break;case\"itemHiddenClass\":m=!n.isVisible();break;case\"itemPositioningClass\":m=n.isPositioning();break;case\"itemDraggingClass\":m=n.isDragging();break;case\"itemReleasingClass\":m=n.isReleasing();break;case\"itemPlaceholderClass\":n._dragPlaceholder&&n._dragPlaceholder.updateClassName(s)}m&&(we(n._element,i),ie(n._element,s))}n.isActive()?u&&(n._visibility.setStyles(g.visibleStyles),n._visibility.stop(!0)):f&&(n._visibility.setStyles(g.hiddenStyles),n._visibility.stop(!0)),(_||l)&&n._drag&&n._drag.getRootGrid()===this&&(n._drag.destroy(),n._drag=null),g.dragEnabled&&(n._drag?n._drag.getRootGrid()===this&&(d&&n._drag._dragger.setCssProps(g.dragCssProps),c&&n._drag._dragger.setListenerOptions(g.dragEventListenerOptions)):n._drag=new be(n))}return\"sortData\"in t&&this.refreshSortData(),this},Si.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i,s,n,r,o=t||this._items;if(!0===e)for(r=[],i=0;i<o.length;i++)(s=o[i]).isVisible()||s.isHiding()||((n=s.getElement().style).visibility=\"hidden\",n.display=\"\",r.push(n));for(i=0;i<o.length;i++)o[i]._refreshDimensions(e);if(r){for(i=0;i<r.length;i++)(n=r[i]).visibility=\"\",n.display=\"none\";r.length=0}return this},Si.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this},Si.prototype.synchronize=function(){if(this._isDestroyed)return this;var t,e,i=this._items;if(!i.length)return this;for(var s=0;s<i.length;s++)(e=i[s]._element).parentNode===this._element&&(t=t||document.createDocumentFragment()).appendChild(e);return t?(this._element.appendChild(t),this._emit(\"synchronize\"),this):this},Si.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&bt(i.cancel)&&i.cancel();var s=wi=wi%16777216+1;this._nextLayoutData={id:s,instant:t,onFinish:e,cancel:null};for(var n=this._items,r=[],o=0;o<n.length;o++)n[o]._isActive&&r.push(n[o]);this._refreshDimensions();var a,h=this._width-this._borderLeft-this._borderRight,l=this._height-this._borderTop-this._borderBottom,_=this._settings.layout;return bt(_)?a=_(this,s,r,h,l,this._onLayoutDataReceived):(Si.defaultPacker.updateSettings(_),a=Si.defaultPacker.createLayout(this,s,r,h,l,this._onLayoutDataReceived)),bt(a)&&this._nextLayoutData&&this._nextLayoutData.id===s&&(this._nextLayoutData.cancel=a),this},Si.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i,s=ui(i=t)?Array.prototype.slice.call(i):Array.prototype.concat(i);if(!s.length)return s;var n,r,o,a,h=e||{},l=h.layout?h.layout:void 0===h.layout,_=this._items,d=!1;for(a=0;a<s.length;a++)(r=s[a]).parentNode!==this._element&&(n=n||document.createDocumentFragment()).appendChild(r);for(n&&this._element.appendChild(n),a=0;a<s.length;a++)r=s[a],(o=s[a]=new ri(this,r,h.active))._isActive&&(d=!0,o._layout._skipNextAnimation=!0);for(a=0;a<s.length;a++)(o=s[a])._refreshDimensions(),o._refreshSortData();return ne(_,s,h.index),this._hasListeners(\"add\")&&this._emit(\"add\",s.slice(0)),d&&l&&this.layout(l===Di,bt(l)?l:void 0),s},Si.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i,s,n,r=e||{},o=r.layout?r.layout:void 0===r.layout,h=!1,l=this.getItems(),_=[],d=[];for(n=0;n<t.length;n++)(s=t[n])._isDestroyed||-1!==(i=this._items.indexOf(s))&&(s._isActive&&(h=!0),_.push(s),d.push(l.indexOf(s)),s._destroy(r.removeElements),this._items.splice(i,1));return this._hasListeners(a)&&this._emit(a,_.slice(0),d),h&&o&&this.layout(o===Di,bt(o)?o:void 0),_},Si.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this},Si.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this},Si.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i,s,n=[],r=[],o=typeof t===yi,a=bt(t),h=e||{},_=!0===h.instant,d=h.syncWithLayout,c=h.layout?h.layout:void 0===h.layout,u=bt(h.onFinish)?h.onFinish:null,f=-1,p=mi;if(u&&(p=function(){++f&&u(n.slice(0),r.slice(0))}),a||o)for(s=0;s<this._items.length;s++)i=this._items[s],(a?t(i):ee(i._element,t))?n.push(i):r.push(i);return n.length?this.show(n,{instant:_,syncWithLayout:d,onFinish:p,layout:!1}):p(),r.length?this.hide(r,{instant:_,syncWithLayout:d,onFinish:p,layout:!1}):p(),(n.length||r.length)&&(this._hasListeners(l)&&this._emit(l,n.slice(0),r.slice(0)),c&&this.layout(c===Di,bt(c)?c:void 0)),this},Si.prototype.sort=function(){var t,e,i,s;function n(n,r){for(var o,a,h,l,_=0,d=0;d<t.length;d++)if(o=t[d][0],a=t[d][1],h=(n._sortData?n:n._refreshSortData())._sortData[o],l=(r._sortData?r:r._refreshSortData())._sortData[o],_=\"desc\"===a||!a&&e?l<h?-1:l>h?1:0:h<l?-1:h>l?1:0)return _;return _||(s||(s=Ri(i)),_=e?Ei(s,r,n):Ei(s,n,r)),_}function r(n,r){var o=e?-t(n,r):t(n,r);return o||(s||(s=Ri(i)),o=e?Ei(s,r,n):Ei(s,n,r)),o}return function(o,a){if(this._isDestroyed||this._items.length<2)return this;var h=this._items,l=a||{},d=l.layout?l.layout:void 0===l.layout;if(e=!!l.descending,i=h.slice(0),s=null,bt(o))t=o,h.sort(r);else if(typeof o===yi)t=o.trim().split(\" \").filter((function(t){return t})).map((function(t){return t.split(\":\")})),h.sort(n);else{if(!Array.isArray(o))throw t=e=i=s=null,new Error(\"Invalid comparer argument provided.\");h.length=0,h.push.apply(h,o)}return this._hasListeners(_)&&this._emit(_,h.slice(0),i),d&&this.layout(d===Di,bt(d)?d:void 0),t=e=i=s=null,this}}(),Si.prototype.move=function(t,e,n){if(this._isDestroyed||this._items.length<2)return this;var r,o,a=this._items,h=n||{},l=h.layout?h.layout:void 0===h.layout,_=h.action===i,c=_?i:s,u=this.getItem(t),f=this.getItem(e);return u&&f&&u!==f&&(r=a.indexOf(u),o=a.indexOf(f),_?ae(a,r,o):oe(a,r,o),this._hasListeners(d)&&this._emit(d,{item:u,fromIndex:r,toIndex:o,action:c}),l&&this.layout(l===Di,bt(l)?l:void 0)),this},Si.prototype.send=function(t,e,i,s){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(!(t=this.getItem(t)))return this;var n=s||{},r=n.appendTo||document.body,o=n.layoutSender?n.layoutSender:void 0===n.layoutSender,a=n.layoutReceiver?n.layoutReceiver:void 0===n.layoutReceiver;return t._migrate.start(e,i,r),t._migrate._isActive&&t._isActive&&(o&&this.layout(o===Di,bt(o)?o:void 0),a&&e.layout(a===Di,bt(a)?a:void 0)),this},Si.prototype.destroy=function(e){if(this._isDestroyed)return this;var i,s,n=this._element,r=this._items.slice(0),o=this._layout&&this._layout.styles||{};for(ki(this),i=0;i<r.length;i++)r[i]._destroy(e);for(s in this._items.length=0,we(n,this._settings.containerClass),o)n.style[s]=\"\";return delete t[this._id],this._isDestroyed=!0,this._emitter.emit(\"destroy\"),this._emitter.destroy(),this},Si.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},Si.prototype._hasListeners=function(t){return!this._isDestroyed&&this._emitter.countListeners(t)>0},Si.prototype._updateBoundingRect=function(){var t=this._element.getBoundingClientRect();this._width=t.width,this._height=t.height,this._left=t.left,this._top=t.top,this._right=t.right,this._bottom=t.bottom},Si.prototype._updateBorders=function(t,e,i,s){var n=this._element;t&&(this._borderLeft=Ct(n,\"border-left-width\")),e&&(this._borderRight=Ct(n,\"border-right-width\")),i&&(this._borderTop=Ct(n,\"border-top-width\")),s&&(this._borderBottom=Ct(n,\"border-bottom-width\"))},Si.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=Et(this._element,\"box-sizing\")},Si.prototype._onLayoutDataReceived=(gi=[],function(t){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===t.id){var e,i,s,a,h=this,l=this._nextLayoutData.instant,_=this._nextLayoutData.onFinish,d=t.items.length,c=d;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(o)&&this._emit(o,this._layout.items.slice(0)),this._layout=t,gi.length=0,a=0;a<d;a++)(e=t.items[a])?(i=t.slots[2*a],s=t.slots[2*a+1],e._canSkipLayout(i,s)?--c:(e._left=i,e._top=s,e.isActive()&&!e.isDragging()?gi.push(e):--c)):--c;if(t.styles&&xe(this._element,t.styles),!this._hasListeners(n)||(this._emit(n,t.items.slice(0),!0===l),this._layout.id===t.id)){var u=function(){if(!(--c>0)){var e=h._layout.id!==t.id,i=bt(l)?l:_;e||(h._isLayoutFinished=!0),bt(i)&&i(t.items.slice(0),e),!e&&h._hasListeners(r)&&h._emit(r,t.items.slice(0))}};if(!gi.length)return u(),this;for(this._isLayoutFinished=!1,a=0;a<gi.length&&this._layout.id===t.id;a++)gi[a]._layout.start(!0===l,u);return this._layout.id===t.id&&(gi.length=0),this}}}),Si.prototype._setItemsVisibility=function(t,e,i){var s,r,o=this,a=t.slice(0),l=i||{},_=!0===l.instant,d=l.onFinish,c=l.layout?l.layout:void 0===l.layout,u=a.length,f=e?\"showStart\":h,p=e?\"showEnd\":\"hideEnd\",m=e?\"show\":\"hide\",g=!1,v=[],y=[];if(u){for(r=0;r<a.length;r++)s=a[r],(e&&!s._isActive||!e&&s._isActive)&&(g=!0),s._layout._skipNextAnimation=!(!e||s._isActive),!e||s.isVisible()||s.isHiding()||y.push(s),e?s._addToLayout():s._removeFromLayout();y.length&&(this.refreshItems(y,!0),y.length=0),g&&!1!==l.syncWithLayout?this.on(n,D):D(),g&&c&&this.layout(c===Di,bt(c)?c:void 0)}else bt(d)&&d(a);function D(){for(g&&!1!==l.syncWithLayout&&o.off(n,D),o._hasListeners(f)&&o._emit(f,a.slice(0)),r=0;r<a.length;r++)a[r]._gridId===o._id?a[r]._visibility[m](_,(function(t,e){t||v.push(e),--u<1&&(bt(d)&&d(v.slice(0)),o._hasListeners(p)&&o._emit(p,v.slice(0)))})):--u<1&&(bt(d)&&d(v.slice(0)),o._hasListeners(p)&&o._emit(p,v.slice(0)))}},Si}));",
            "type": "application/javascript",
            "title": "$:/plugins/BTC/Muuri/library/muuri.min.js",
            "tags": "",
            "module-type": "library",
            "modified": "20201003111718276",
            "created": "20200823113320970"
        },
        "$:/plugins/BTC/Muuri/library/web-animations-polyfill.js": {
            "text": "// Copyright 2014 Google Inc. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n//     You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n//     See the License for the specific language governing permissions and\n// limitations under the License.\n\n!function(a,b){var c={},d={};!function(a,b){function c(a){if(\"number\"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function d(){this._delay=0,this._endDelay=0,this._fill=\"none\",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction=\"normal\",this._easing=\"linear\",this._easingFunction=x}function e(){return a.isDeprecated(\"Invalid timing inputs\",\"2016-03-02\",\"TypeError exceptions will be thrown instead.\",!0)}function f(b,c,e){var f=new d;return c&&(f.fill=\"both\",f.duration=\"auto\"),\"number\"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if(\"auto\"!=b[c]){if((\"number\"==typeof f[c]||\"duration\"==c)&&(\"number\"!=typeof b[c]||isNaN(b[c])))return;if(\"fill\"==c&&-1==v.indexOf(b[c]))return;if(\"direction\"==c&&-1==w.indexOf(b[c]))return;if(\"playbackRate\"==c&&1!==b[c]&&a.isDeprecated(\"AnimationEffectTiming.playbackRate\",\"2014-11-28\",\"Use Animation.playbackRate instead.\"))return;f[c]=b[c]}}):f.duration=b,f}function g(a){return\"number\"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function h(b,c){return b=a.numericTimingToObject(b),f(b,c)}function i(a,b,c,d){return a<0||a>1||c<0||c>1?x:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(e<=0){var g=0;return a>0?g=b/a:!b&&c>0&&(g=d/c),g*e}if(e>=1){var h=0;return c<1?h=(d-1)/(c-1):1==c&&a<1&&(h=(b-1)/(a-1)),1+h*(e-1)}for(var i=0,j=1;i<j;){var k=(i+j)/2,l=f(a,c,k);if(Math.abs(e-l)<1e-5)return f(b,d,k);l<e?i=k:j=k}return f(b,d,k)}}function j(a,b){return function(c){if(c>=1)return 1;var d=1/a;return(c+=b*d)-c%d}}function k(a){C||(C=document.createElement(\"div\").style),C.animationTimingFunction=\"\",C.animationTimingFunction=a;var b=C.animationTimingFunction;if(\"\"==b&&e())throw new TypeError(a+\" is not a valid value for easing\");return b}function l(a){if(\"linear\"==a)return x;var b=E.exec(a);if(b)return i.apply(this,b.slice(1).map(Number));var c=F.exec(a);return c?j(Number(c[1]),{start:y,middle:z,end:A}[c[2]]):B[a]||x}function m(a){return Math.abs(n(a)/a.playbackRate)}function n(a){return 0===a.duration||0===a.iterations?0:a.duration*a.iterations}function o(a,b,c){if(null==b)return G;var d=c.delay+a+c.endDelay;return b<Math.min(c.delay,d)?H:b>=Math.min(c.delay+a,d)?I:J}function p(a,b,c,d,e){switch(d){case H:return\"backwards\"==b||\"both\"==b?0:null;case J:return c-e;case I:return\"forwards\"==b||\"both\"==b?a:null;case G:return null}}function q(a,b,c,d,e){var f=e;return 0===a?b!==H&&(f+=c):f+=d/a,f}function r(a,b,c,d,e,f){var g=a===1/0?b%1:a%1;return 0!==g||c!==I||0===d||0===e&&0!==f||(g=1),g}function s(a,b,c,d){return a===I&&b===1/0?1/0:1===c?Math.floor(d)-1:Math.floor(d)}function t(a,b,c){var d=a;if(\"normal\"!==a&&\"reverse\"!==a){var e=b;\"alternate-reverse\"===a&&(e+=1),d=\"normal\",e!==1/0&&e%2!=0&&(d=\"reverse\")}return\"normal\"===d?c:1-c}function u(a,b,c){var d=o(a,b,c),e=p(a,c.fill,b,d,c.delay);if(null===e)return null;var f=q(c.duration,d,c.iterations,e,c.iterationStart),g=r(f,c.iterationStart,d,c.iterations,e,c.duration),h=s(d,c.iterations,g,f),i=t(c.direction,h,g);return c._easingFunction(i)}var v=\"backwards|forwards|both|none\".split(\"|\"),w=\"reverse|alternate|alternate-reverse\".split(\"|\"),x=function(a){return a};d.prototype={_setMember:function(b,c){this[\"_\"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember(\"delay\",a)},get delay(){return this._delay},set endDelay(a){this._setMember(\"endDelay\",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember(\"fill\",a)},get fill(){return this._fill},set iterationStart(a){if((isNaN(a)||a<0)&&e())throw new TypeError(\"iterationStart must be a non-negative number, received: \"+timing.iterationStart);this._setMember(\"iterationStart\",a)},get iterationStart(){return this._iterationStart},set duration(a){if(\"auto\"!=a&&(isNaN(a)||a<0)&&e())throw new TypeError(\"duration must be non-negative or auto, received: \"+a);this._setMember(\"duration\",a)},get duration(){return this._duration},set direction(a){this._setMember(\"direction\",a)},get direction(){return this._direction},set easing(a){this._easingFunction=l(k(a)),this._setMember(\"easing\",a)},get easing(){return this._easing},set iterations(a){if((isNaN(a)||a<0)&&e())throw new TypeError(\"iterations must be non-negative, received: \"+a);this._setMember(\"iterations\",a)},get iterations(){return this._iterations}};var y=1,z=.5,A=0,B={ease:i(.25,.1,.25,1),\"ease-in\":i(.42,0,1,1),\"ease-out\":i(0,0,.58,1),\"ease-in-out\":i(.42,0,.58,1),\"step-start\":j(1,y),\"step-middle\":j(1,z),\"step-end\":j(1,A)},C=null,D=\"\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*\",E=new RegExp(\"cubic-bezier\\\\(\"+D+\",\"+D+\",\"+D+\",\"+D+\"\\\\)\"),F=/steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/,G=0,H=1,I=2,J=3;a.cloneTimingInput=c,a.makeTiming=f,a.numericTimingToObject=g,a.normalizeTimingInput=h,a.calculateActiveDuration=m,a.calculateIterationProgress=u,a.calculatePhase=o,a.normalizeEasing=k,a.parseEasingFunction=l}(c),function(a,b){function c(a,b){return a in k?k[a][b]||b:b}function d(a){return\"display\"===a||0===a.lastIndexOf(\"animation\",0)||0===a.lastIndexOf(\"transition\",0)}function e(a,b,e){if(!d(a)){var f=h[a];if(f){i.style[a]=b;for(var g in f){var j=f[g],k=i.style[j];e[j]=c(j,k)}}else e[a]=c(a,b)}}function f(a){var b=[];for(var c in a)if(!(c in[\"easing\",\"offset\",\"composite\"])){var d=a[c];Array.isArray(d)||(d=[d]);for(var e,f=d.length,g=0;g<f;g++)e={},e.offset=\"offset\"in a?a.offset:1==f?1:g/(f-1),\"easing\"in a&&(e.easing=a.easing),\"composite\"in a&&(e.composite=a.composite),e[c]=d[g],b.push(e)}return b.sort(function(a,b){return a.offset-b.offset}),b}function g(b){function c(){var a=d.length;null==d[a-1].offset&&(d[a-1].offset=1),a>1&&null==d[0].offset&&(d[0].offset=0);for(var b=0,c=d[0].offset,e=1;e<a;e++){var f=d[e].offset;if(null!=f){for(var g=1;g<e-b;g++)d[b+g].offset=c+(f-c)*g/(e-b);b=e,c=f}}}if(null==b)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||(b=f(b));for(var d=b.map(function(b){var c={};for(var d in b){var f=b[d];if(\"offset\"==d){if(null!=f){if(f=Number(f),!isFinite(f))throw new TypeError(\"Keyframe offsets must be numbers.\");if(f<0||f>1)throw new TypeError(\"Keyframe offsets must be between 0 and 1.\")}}else if(\"composite\"==d){if(\"add\"==f||\"accumulate\"==f)throw{type:DOMException.NOT_SUPPORTED_ERR,name:\"NotSupportedError\",message:\"add compositing is not supported\"};if(\"replace\"!=f)throw new TypeError(\"Invalid composite mode \"+f+\".\")}else f=\"easing\"==d?a.normalizeEasing(f):\"\"+f;e(d,f,c)}return void 0==c.offset&&(c.offset=null),void 0==c.easing&&(c.easing=\"linear\"),c}),g=!0,h=-1/0,i=0;i<d.length;i++){var j=d[i].offset;if(null!=j){if(j<h)throw new TypeError(\"Keyframes are not loosely sorted by offset. Sort or specify offsets.\");h=j}else g=!1}return d=d.filter(function(a){return a.offset>=0&&a.offset<=1}),g||c(),d}var h={background:[\"backgroundImage\",\"backgroundPosition\",\"backgroundSize\",\"backgroundRepeat\",\"backgroundAttachment\",\"backgroundOrigin\",\"backgroundClip\",\"backgroundColor\"],border:[\"borderTopColor\",\"borderTopStyle\",\"borderTopWidth\",\"borderRightColor\",\"borderRightStyle\",\"borderRightWidth\",\"borderBottomColor\",\"borderBottomStyle\",\"borderBottomWidth\",\"borderLeftColor\",\"borderLeftStyle\",\"borderLeftWidth\"],borderBottom:[\"borderBottomWidth\",\"borderBottomStyle\",\"borderBottomColor\"],borderColor:[\"borderTopColor\",\"borderRightColor\",\"borderBottomColor\",\"borderLeftColor\"],borderLeft:[\"borderLeftWidth\",\"borderLeftStyle\",\"borderLeftColor\"],borderRadius:[\"borderTopLeftRadius\",\"borderTopRightRadius\",\"borderBottomRightRadius\",\"borderBottomLeftRadius\"],borderRight:[\"borderRightWidth\",\"borderRightStyle\",\"borderRightColor\"],borderTop:[\"borderTopWidth\",\"borderTopStyle\",\"borderTopColor\"],borderWidth:[\"borderTopWidth\",\"borderRightWidth\",\"borderBottomWidth\",\"borderLeftWidth\"],flex:[\"flexGrow\",\"flexShrink\",\"flexBasis\"],font:[\"fontFamily\",\"fontSize\",\"fontStyle\",\"fontVariant\",\"fontWeight\",\"lineHeight\"],margin:[\"marginTop\",\"marginRight\",\"marginBottom\",\"marginLeft\"],outline:[\"outlineColor\",\"outlineStyle\",\"outlineWidth\"],padding:[\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\"]},i=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\"),j={thin:\"1px\",medium:\"3px\",thick:\"5px\"},k={borderBottomWidth:j,borderLeftWidth:j,borderRightWidth:j,borderTopWidth:j,fontSize:{\"xx-small\":\"60%\",\"x-small\":\"75%\",small:\"89%\",medium:\"100%\",large:\"120%\",\"x-large\":\"150%\",\"xx-large\":\"200%\"},fontWeight:{normal:\"400\",bold:\"700\"},outlineWidth:j,textShadow:{none:\"0px 0px 0px transparent\"},boxShadow:{none:\"0px 0px 0px 0px transparent\"}};a.convertToArrayForm=f,a.normalizeKeyframes=g}(c),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?\"are\":\"is\",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),!(g<h&&(a in b||console.warn(\"Web Animations: \"+a+\" \"+f+\" deprecated and will stop working on \"+h.toDateString()+\". \"+d),b[a]=!0,1))},a.deprecated=function(b,c,d,e){var f=e?\"are\":\"is\";if(a.isDeprecated(b,c,d,e))throw new Error(b+\" \"+f+\" no longer supported. \"+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,\"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState\".split(\"|\").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b,c){function d(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if(\"offset\"!=d&&\"easing\"!=d&&\"composite\"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:\"NotSupportedError\",message:\"Partial keyframes are not supported\"}}return b}function e(c){var d=[];for(var e in c)for(var f=c[e],g=0;g<f.length-1;g++){var h=g,i=g+1,j=f[h].offset,k=f[i].offset,l=j,m=k;0==g&&(l=-1/0,0==k&&(i=h)),g==f.length-2&&(m=1/0,1==j&&(h=i)),d.push({applyFrom:l,applyTo:m,startOffset:f[h].offset,endOffset:f[i].offset,easingFunction:a.parseEasingFunction(f[h].easing),property:e,interpolation:b.propertyInterpolation(e,f[h].value,f[i].value)})}return d.sort(function(a,b){return a.startOffset-b.startOffset}),d}b.convertEffectInput=function(c){var f=a.normalizeKeyframes(c),g=d(f),h=e(g);return function(a,c){if(null!=c)h.filter(function(a){return c>=a.applyFrom&&c<a.applyTo}).forEach(function(d){var e=c-d.startOffset,f=d.endOffset-d.startOffset,g=0==f?0:d.easingFunction(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)\"offset\"!=d&&\"easing\"!=d&&\"composite\"!=d&&b.clear(a,d)}}}(c,d),function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a,b,c){h[c]=h[c]||[],h[c].push([a,b])}function f(a,b,c){for(var f=0;f<c.length;f++){e(a,b,d(c[f]))}}function g(c,e,f){var g=c;/-/.test(c)&&!a.isDeprecated(\"Hyphenated property names\",\"2016-03-22\",\"Use camelCase instead.\",!0)&&(g=d(c)),\"initial\"!=e&&\"initial\"!=f||(\"initial\"==e&&(e=i[g]),\"initial\"==f&&(f=i[g]));for(var j=e==f?[]:h[g],k=0;j&&k<j.length;k++){var l=j[k][0](e),m=j[k][0](f);if(void 0!==l&&void 0!==m){var n=j[k][1](l,m);if(n){var o=b.Interpolation.apply(null,n);return function(a){return 0==a?e:1==a?f:o(a)}}}}return b.Interpolation(!1,!0,function(a){return a?f:e})}var h={};b.addPropertiesHandler=f;var i={backgroundColor:\"transparent\",backgroundPosition:\"0% 0%\",borderBottomColor:\"currentColor\",borderBottomLeftRadius:\"0px\",borderBottomRightRadius:\"0px\",borderBottomWidth:\"3px\",borderLeftColor:\"currentColor\",borderLeftWidth:\"3px\",borderRightColor:\"currentColor\",borderRightWidth:\"3px\",borderSpacing:\"2px\",borderTopColor:\"currentColor\",borderTopLeftRadius:\"0px\",borderTopRightRadius:\"0px\",borderTopWidth:\"3px\",bottom:\"auto\",clip:\"rect(0px, 0px, 0px, 0px)\",color:\"black\",fontSize:\"100%\",fontWeight:\"400\",height:\"auto\",left:\"auto\",letterSpacing:\"normal\",lineHeight:\"120%\",marginBottom:\"0px\",marginLeft:\"0px\",marginRight:\"0px\",marginTop:\"0px\",maxHeight:\"none\",maxWidth:\"none\",minHeight:\"0px\",minWidth:\"0px\",opacity:\"1.0\",outlineColor:\"invert\",outlineOffset:\"0px\",outlineWidth:\"3px\",paddingBottom:\"0px\",paddingLeft:\"0px\",paddingRight:\"0px\",paddingTop:\"0px\",right:\"auto\",strokeDasharray:\"none\",strokeDashoffset:\"0px\",textIndent:\"0px\",textShadow:\"0px 0px 0px transparent\",top:\"auto\",transform:\"\",verticalAlign:\"0px\",visibility:\"visible\",width:\"auto\",wordSpacing:\"normal\",zIndex:\"auto\"};b.propertyInterpolation=g}(c,d),function(a,b,c){function d(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateIterationProgress(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d}b.KeyframeEffect=function(c,e,f,g){var h,i=d(a.normalizeTimingInput(f)),j=b.convertEffectInput(e),k=function(){j(c,h)};return k._update=function(a){return null!==(h=i(a))},k._clear=function(){j(c,null)},k._hasSameTarget=function(a){return c===a},k._target=c,k._totalDuration=i._totalDuration,k._id=g,k}}(c,d),function(a,b){function c(a,b){return!(!b.namespaceURI||-1==b.namespaceURI.indexOf(\"/svg\"))&&(g in a||(a[g]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(a.navigator.userAgent)),a[g])}function d(a,b,c){c.enumerable=!0,c.configurable=!0,Object.defineProperty(a,b,c)}function e(a){this._element=a,this._surrogateStyle=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\").style,this._style=a.style,this._length=0,this._isAnimatedProperty={},this._updateSvgTransformAttr=c(window,a),this._savedTransformAttr=null;for(var b=0;b<this._style.length;b++){var d=this._style[b];this._surrogateStyle[d]=this._style[d]}this._updateIndices()}function f(a){if(!a._webAnimationsPatchedStyle){var b=new e(a);try{d(a,\"style\",{get:function(){return b}})}catch(b){a.style._set=function(b,c){a.style[b]=c},a.style._clear=function(b){a.style[b]=\"\"}}a._webAnimationsPatchedStyle=a.style}}var g=\"_webAnimationsUpdateSvgTransformAttr\",h={cssText:1,length:1,parentRule:1},i={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},j={removeProperty:1,setProperty:1};e.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(a){for(var b={},c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;this._surrogateStyle.cssText=a,this._updateIndices();for(var c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;for(var d in b)this._isAnimatedProperty[d]||this._style.setProperty(d,this._surrogateStyle.getPropertyValue(d))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(a){return function(){return this._surrogateStyle[a]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(b,c){this._style[b]=c,this._isAnimatedProperty[b]=!0,this._updateSvgTransformAttr&&\"transform\"==a.unprefixedPropertyName(b)&&(null==this._savedTransformAttr&&(this._savedTransformAttr=this._element.getAttribute(\"transform\")),this._element.setAttribute(\"transform\",a.transformToSvgMatrix(c)))},_clear:function(b){this._style[b]=this._surrogateStyle[b],this._updateSvgTransformAttr&&\"transform\"==a.unprefixedPropertyName(b)&&(this._savedTransformAttr?this._element.setAttribute(\"transform\",this._savedTransformAttr):this._element.removeAttribute(\"transform\"),this._savedTransformAttr=null),delete this._isAnimatedProperty[b]}};for(var k in i)e.prototype[k]=function(a,b){return function(){var c=this._surrogateStyle[a].apply(this._surrogateStyle,arguments);return b&&(this._isAnimatedProperty[arguments[0]]||this._style[a].apply(this._style,arguments),this._updateIndices()),c}}(k,k in j);for(var l in document.documentElement.style)l in h||l in i||function(a){d(e.prototype,a,{get:function(){return this._surrogateStyle[a]},set:function(b){this._surrogateStyle[a]=b,this._updateIndices(),this._isAnimatedProperty[a]||(this._style[a]=b)}})}(l);a.apply=function(b,c,d){f(b),b.style._set(a.propertyName(c),d)},a.clear=function(b,c){b._webAnimationsPatchedStyle&&b.style._clear(a.propertyName(c))}}(d),function(a){window.Element.prototype.animate=function(b,c){var d=\"\";return c&&c.id&&(d=c.id),a.timeline._play(a.KeyframeEffect(this,b,c,d))}}(d),function(a,b){function c(a,b,d){if(\"number\"==typeof a&&\"number\"==typeof b)return a*(1-d)+b*d;if(\"boolean\"==typeof a&&\"boolean\"==typeof b)return d<.5?a:b;if(a.length==b.length){for(var e=[],f=0;f<a.length;f++)e.push(c(a[f],b[f],d));return e}throw\"Mismatched interpolation arguments \"+a+\":\"+b}a.Interpolation=function(a,b,d){return function(e){return d(c(a,b,e))}}}(d),function(a,b){function c(a,b,c){return Math.max(Math.min(a,c),b)}function d(b,d,e){var f=a.dot(b,d);f=c(f,-1,1);var g=[];if(1===f)g=b;else for(var h=Math.acos(f),i=1*Math.sin(e*h)/Math.sqrt(1-f*f),j=0;j<4;j++)g.push(b[j]*(Math.cos(e*h)-f*i)+d[j]*i);return g}var e=function(){function a(a,b){for(var c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],d=0;d<4;d++)for(var e=0;e<4;e++)for(var f=0;f<4;f++)c[d][e]+=b[d][f]*a[f][e];return c}function b(a){return 0==a[0][2]&&0==a[0][3]&&0==a[1][2]&&0==a[1][3]&&0==a[2][0]&&0==a[2][1]&&1==a[2][2]&&0==a[2][3]&&0==a[3][2]&&1==a[3][3]}function c(c,d,e,f,g){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],i=0;i<4;i++)h[i][3]=g[i];for(var i=0;i<3;i++)for(var j=0;j<3;j++)h[3][i]+=c[j]*h[j][i];var k=f[0],l=f[1],m=f[2],n=f[3],o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[0][0]=1-2*(l*l+m*m),o[0][1]=2*(k*l-m*n),o[0][2]=2*(k*m+l*n),o[1][0]=2*(k*l+m*n),o[1][1]=1-2*(k*k+m*m),o[1][2]=2*(l*m-k*n),o[2][0]=2*(k*m-l*n),o[2][1]=2*(l*m+k*n),o[2][2]=1-2*(k*k+l*l),h=a(h,o);var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];e[2]&&(p[2][1]=e[2],h=a(h,p)),e[1]&&(p[2][1]=0,p[2][0]=e[0],h=a(h,p)),e[0]&&(p[2][0]=0,p[1][0]=e[0],h=a(h,p));for(var i=0;i<3;i++)for(var j=0;j<3;j++)h[i][j]*=d[i];return b(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return c}();a.composeMatrix=e,a.quat=d}(d),function(a,b,c){a.sequenceNumber=0;var d=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type=\"finish\",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this.id=\"\",b&&b._id&&(this.id=b._id),this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(a,!0),b.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var c=this.currentTime;this._playbackRate=a,this._startTime=null,\"paused\"!=this.playState&&\"idle\"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)),null!=c&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?\"idle\":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?\"pending\":this._paused?\"paused\":this._isFinished?\"finished\":\"running\"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException(\"Unable to rewind negative playback rate animation with infinite duration\",\"InvalidStateError\");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,b.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),b.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){\"function\"==typeof b&&\"finish\"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if(\"finish\"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var b=new d(this,this._currentTime,a),c=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){c.forEach(function(a){a.call(b.target,b)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,b){this._idle||this._paused||(null==this._startTime?b&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),b&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var a=this._effect._target;return a._activeAnimations||(a._activeAnimations=[]),a._activeAnimations},_markTarget:function(){var a=this._targetAnimations();-1===a.indexOf(this)&&a.push(this)},_unmarkTarget:function(){var a=this._targetAnimations(),b=a.indexOf(this);-1!==b&&a.splice(b,1)}}}(c,d),function(a,b,c){function d(a){var b=j;j=[],a<q.currentTime&&(a=q.currentTime),q._animations.sort(e),q._animations=h(a,!0,q._animations)[0],b.forEach(function(b){b[1](a)}),g(),l=void 0}function e(a,b){return a._sequenceNumber-b._sequenceNumber}function f(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function g(){o.forEach(function(a){a()}),o.length=0}function h(a,c,d){p=!0,n=!1,b.timeline.currentTime=a,m=!1;var e=[],f=[],g=[],h=[];return d.forEach(function(b){b._tick(a,c),b._inEffect?(f.push(b._effect),b._markTarget()):(e.push(b._effect),b._unmarkTarget()),b._needsTick&&(m=!0);var d=b._inEffect||b._needsTick;b._inTimeline=d,d?g.push(b):h.push(b)}),o.push.apply(o,e),o.push.apply(o,f),m&&requestAnimationFrame(function(){}),p=!1,[g,h]}var i=window.requestAnimationFrame,j=[],k=0;window.requestAnimationFrame=function(a){var b=k++;return 0==j.length&&i(d),j.push([b,a]),b},window.cancelAnimationFrame=function(a){j.forEach(function(b){b[0]==a&&(b[1]=function(){})})},f.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.applyDirtiedAnimation(d),d}};var l=void 0,m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n},b.applyDirtiedAnimation=function(a){if(!p){a._markTarget();var c=a._targetAnimations();c.sort(e),h(b.timeline.currentTime,!1,c.slice())[1].forEach(function(a){var b=q._animations.indexOf(a);-1!==b&&q._animations.splice(b,1)}),g()}};var o=[],p=!1,q=new f;b.timeline=q}(c,d),function(a,b){function c(a,b){for(var c=0,d=0;d<a.length;d++)c+=a[d]*b[d];return c}function d(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]}function e(a){var b=a.rad||0;return((a.deg||0)/360+(a.grad||0)/400+(a.turn||0))*(2*Math.PI)+b}function f(a){switch(a.t){case\"rotatex\":var b=e(a.d[0]);return[1,0,0,0,0,Math.cos(b),Math.sin(b),0,0,-Math.sin(b),Math.cos(b),0,0,0,0,1];case\"rotatey\":var b=e(a.d[0]);return[Math.cos(b),0,-Math.sin(b),0,0,1,0,0,Math.sin(b),0,Math.cos(b),0,0,0,0,1];case\"rotate\":case\"rotatez\":var b=e(a.d[0]);return[Math.cos(b),Math.sin(b),0,0,-Math.sin(b),Math.cos(b),0,0,0,0,1,0,0,0,0,1];case\"rotate3d\":var c=a.d[0],d=a.d[1],f=a.d[2],b=e(a.d[3]),g=c*c+d*d+f*f;if(0===g)c=1,d=0,f=0;else if(1!==g){var h=Math.sqrt(g);c/=h,d/=h,f/=h}var i=Math.sin(b/2),j=i*Math.cos(b/2),k=i*i;return[1-2*(d*d+f*f)*k,2*(c*d*k+f*j),2*(c*f*k-d*j),0,2*(c*d*k-f*j),1-2*(c*c+f*f)*k,2*(d*f*k+c*j),0,2*(c*f*k+d*j),2*(d*f*k-c*j),1-2*(c*c+d*d)*k,0,0,0,0,1];case\"scale\":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,1,0,0,0,0,1];case\"scalex\":return[a.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case\"scaley\":return[1,0,0,0,0,a.d[0],0,0,0,0,1,0,0,0,0,1];case\"scalez\":return[1,0,0,0,0,1,0,0,0,0,a.d[0],0,0,0,0,1];case\"scale3d\":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,a.d[2],0,0,0,0,1];case\"skew\":var l=e(a.d[0]),m=e(a.d[1]);return[1,Math.tan(m),0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case\"skewx\":var b=e(a.d[0]);return[1,0,0,0,Math.tan(b),1,0,0,0,0,1,0,0,0,0,1];case\"skewy\":var b=e(a.d[0]);return[1,Math.tan(b),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case\"translate\":var c=a.d[0].px||0,d=a.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,c,d,0,1];case\"translatex\":var c=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,c,0,0,1];case\"translatey\":var d=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,d,0,1];case\"translatez\":var f=a.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,f,1];case\"translate3d\":var c=a.d[0].px||0,d=a.d[1].px||0,f=a.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,c,d,f,1];case\"perspective\":return[1,0,0,0,0,1,0,0,0,0,1,a.d[0].px?-1/a.d[0].px:0,0,0,0,1];case\"matrix\":return[a.d[0],a.d[1],0,0,a.d[2],a.d[3],0,0,0,0,1,0,a.d[4],a.d[5],0,1];case\"matrix3d\":return a.d}}function g(a){return 0===a.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:a.map(f).reduce(d)}function h(a){return[i(g(a))]}var i=function(){function a(a){return a[0][0]*a[1][1]*a[2][2]+a[1][0]*a[2][1]*a[0][2]+a[2][0]*a[0][1]*a[1][2]-a[0][2]*a[1][1]*a[2][0]-a[1][2]*a[2][1]*a[0][0]-a[2][2]*a[0][1]*a[1][0]}function b(b){for(var c=1/a(b),d=b[0][0],e=b[0][1],f=b[0][2],g=b[1][0],h=b[1][1],i=b[1][2],j=b[2][0],k=b[2][1],l=b[2][2],m=[[(h*l-i*k)*c,(f*k-e*l)*c,(e*i-f*h)*c,0],[(i*j-g*l)*c,(d*l-f*j)*c,(f*g-d*i)*c,0],[(g*k-h*j)*c,(j*e-d*k)*c,(d*h-e*g)*c,0]],n=[],o=0;o<3;o++){for(var p=0,q=0;q<3;q++)p+=b[3][q]*m[q][o];n.push(p)}return n.push(1),m.push(n),m}function d(a){return[[a[0][0],a[1][0],a[2][0],a[3][0]],[a[0][1],a[1][1],a[2][1],a[3][1]],[a[0][2],a[1][2],a[2][2],a[3][2]],[a[0][3],a[1][3],a[2][3],a[3][3]]]}function e(a,b){for(var c=[],d=0;d<4;d++){for(var e=0,f=0;f<4;f++)e+=a[f]*b[f][d];c.push(e)}return c}function f(a){var b=g(a);return[a[0]/b,a[1]/b,a[2]/b]}function g(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}function h(a,b,c,d){return[c*a[0]+d*b[0],c*a[1]+d*b[1],c*a[2]+d*b[2]]}function i(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function j(j){var k=[j.slice(0,4),j.slice(4,8),j.slice(8,12),j.slice(12,16)];if(1!==k[3][3])return null;for(var l=[],m=0;m<4;m++)l.push(k[m].slice());for(var m=0;m<3;m++)l[m][3]=0;if(0===a(l))return null;var n,o=[];k[0][3]||k[1][3]||k[2][3]?(o.push(k[0][3]),o.push(k[1][3]),o.push(k[2][3]),o.push(k[3][3]),n=e(o,d(b(l)))):n=[0,0,0,1];var p=k[3].slice(0,3),q=[];q.push(k[0].slice(0,3));var r=[];r.push(g(q[0])),q[0]=f(q[0]);var s=[];q.push(k[1].slice(0,3)),s.push(c(q[0],q[1])),q[1]=h(q[1],q[0],1,-s[0]),r.push(g(q[1])),q[1]=f(q[1]),s[0]/=r[1],q.push(k[2].slice(0,3)),s.push(c(q[0],q[2])),q[2]=h(q[2],q[0],1,-s[1]),s.push(c(q[1],q[2])),q[2]=h(q[2],q[1],1,-s[2]),r.push(g(q[2])),q[2]=f(q[2]),s[1]/=r[2],s[2]/=r[2];var t=i(q[1],q[2]);if(c(q[0],t)<0)for(var m=0;m<3;m++)r[m]*=-1,q[m][0]*=-1,q[m][1]*=-1,q[m][2]*=-1;var u,v,w=q[0][0]+q[1][1]+q[2][2]+1;return w>1e-4?(u=.5/Math.sqrt(w),v=[(q[2][1]-q[1][2])*u,(q[0][2]-q[2][0])*u,(q[1][0]-q[0][1])*u,.25/u]):q[0][0]>q[1][1]&&q[0][0]>q[2][2]?(u=2*Math.sqrt(1+q[0][0]-q[1][1]-q[2][2]),v=[.25*u,(q[0][1]+q[1][0])/u,(q[0][2]+q[2][0])/u,(q[2][1]-q[1][2])/u]):q[1][1]>q[2][2]?(u=2*Math.sqrt(1+q[1][1]-q[0][0]-q[2][2]),v=[(q[0][1]+q[1][0])/u,.25*u,(q[1][2]+q[2][1])/u,(q[0][2]-q[2][0])/u]):(u=2*Math.sqrt(1+q[2][2]-q[0][0]-q[1][1]),v=[(q[0][2]+q[2][0])/u,(q[1][2]+q[2][1])/u,.25*u,(q[1][0]-q[0][1])/u]),[p,r,s,v,n]}return j}();a.dot=c,a.makeMatrixDecomposition=h,a.transformListToMatrix=g}(d),function(a){function b(a,b){var c=a.exec(b);if(c)return c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]}function c(a,b){b=b.replace(/^\\s*/,\"\");var c=a(b);if(c)return[c[0],c[1].replace(/^\\s*/,\"\")]}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],!(g=b(d,e))||\"\"==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\\s|,/.test(b[d])||0!=c);d++)if(\"(\"==b[d])c++;else if(\")\"==b[d]&&(c--,0==c&&d++,c<=0))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){return a(c)||[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||\"\"==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}if(\"\"==c)return d}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;k<j;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if(\"function\"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b=\"\",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);if(e&&e[0].length)return[d,e[1]]}function c(c){var d=a.consumeRepeated(b,/^,/,c);if(d&&\"\"==d[1])return d[0]}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?\"inset \":\" \",f=0;f<e.length;f++)c+=e[f](a[0][f])+\" \";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,\", \");a.addPropertiesHandler(c,f,[\"box-shadow\",\"text-shadow\"])}(d),function(a,b){function c(a){return a.toFixed(3).replace(/0+$/,\"\").replace(/\\.$/,\"\")}function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a){if(/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(a))return Number(a)}function f(a,b){return[a,b,c]}function g(a,b){if(0!=a)return i(0,1/0)(a,b)}function h(a,b){return[a,b,function(a){return Math.round(d(1,1/0,a))}]}function i(a,b){return function(e,f){return[e,f,function(e){return c(d(a,b,e))}]}}function j(a){var b=a.trim().split(/\\s*[\\s,]\\s*/);if(0!==b.length){for(var c=[],d=0;d<b.length;d++){var f=e(b[d]);if(void 0===f)return;c.push(f)}return c}}function k(a,b){if(a.length==b.length)return[a,b,function(a){return a.map(c).join(\" \")}]}function l(a,b){return[a,b,Math.round]}a.clamp=d,a.addPropertiesHandler(j,k,[\"stroke-dasharray\"]),a.addPropertiesHandler(e,i(0,1/0),[\"border-image-width\",\"line-height\"]),a.addPropertiesHandler(e,i(0,1),[\"opacity\",\"shape-image-threshold\"]),a.addPropertiesHandler(e,g,[\"flex-grow\",\"flex-shrink\"]),a.addPropertiesHandler(e,h,[\"orphans\",\"widows\"]),a.addPropertiesHandler(e,l,[\"z-index\"]),a.parseNumber=e,a.parseNumberList=j,a.mergeNumbers=f,a.numberToString=c}(d),function(a,b){function c(a,b){if(\"visible\"==a||\"visible\"==b)return[0,1,function(c){return c<=0?a:c>=1?b:\"visible\"}]}a.addPropertiesHandler(String,c,[\"visibility\"])}(d),function(a,b){function c(a){a=a.trim(),f.fillStyle=\"#000\",f.fillStyle=a;var b=f.fillStyle;if(f.fillStyle=\"#fff\",f.fillStyle=a,b==f.fillStyle){f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1).data;f.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function d(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;d<3;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),\"rgba(\"+b.join(\",\")+\")\"}]}var e=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");e.width=e.height=1;var f=e.getContext(\"2d\");a.addPropertiesHandler(c,d,[\"background-color\",\"border-bottom-color\",\"border-left-color\",\"border-right-color\",\"border-top-color\",\"color\",\"fill\",\"flood-color\",\"lighting-color\",\"outline-color\",\"stop-color\",\"stroke\",\"text-decoration-color\"]),a.consumeColor=a.consumeParenthesised.bind(null,c),a.mergeColors=d}(d),function(a,b){function c(a){function b(){var b=h.exec(a);g=b?b[0]:void 0}function c(){var a=Number(g);return b(),a}function d(){if(\"(\"!==g)return c();b();var a=f();return\")\"!==g?NaN:(b(),a)}function e(){for(var a=d();\"*\"===g||\"/\"===g;){var c=g;b();var e=d();\"*\"===c?a*=e:a/=e}return a}function f(){for(var a=e();\"+\"===g||\"-\"===g;){var c=g;b();var d=e();\"+\"===c?a+=d:a-=d}return a}var g,h=/([\\+\\-\\w\\.]+|[\\(\\)\\*\\/])/g;return b(),f()}function d(a,b){if(\"0\"==(b=b.trim().toLowerCase())&&\"px\".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\\(/g,\"(\");var d={};b=b.replace(a,function(a){return d[a]=null,\"U\"+a});for(var e=\"U(\"+a.source+\")\",f=b.replace(/[-+]?(\\d*\\.)?\\d+([Ee][-+]?\\d+)?/g,\"N\").replace(new RegExp(\"N\"+e,\"g\"),\"D\").replace(/\\s[+-]\\s/g,\"O\").replace(/\\s/g,\"\"),g=[/N\\*(D)/g,/(N|D)[*\\/]N/g,/(N|D)O\\1/g,/\\((N|D)\\)/g],h=0;h<g.length;)g[h].test(f)?(f=f.replace(g[h],\"$1\"),h=0):h++;if(\"D\"==f){for(var i in d){var j=c(b.replace(new RegExp(\"U\"+i,\"g\"),\"\").replace(new RegExp(e,\"g\"),\"*0\"));if(!isFinite(j))return;d[i]=j}return d}}}function e(a,b){return f(a,b,!0)}function f(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(\" + \");return b.length>1?\"calc(\"+c+\")\":c}]}var g=\"px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc\",h=d.bind(null,new RegExp(g,\"g\")),i=d.bind(null,new RegExp(g+\"|%\",\"g\")),j=d.bind(null,/deg|rad|grad|turn/g);a.parseLength=h,a.parseLengthOrPercent=i,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,i),a.parseAngle=j,a.mergeDimensions=f;var k=a.consumeParenthesised.bind(null,h),l=a.consumeRepeated.bind(void 0,k,/^/),m=a.consumeRepeated.bind(void 0,l,/^,/);a.consumeSizePairList=m;var n=function(a){var b=m(a);if(b&&\"\"==b[1])return b[0]},o=a.mergeNestedRepeated.bind(void 0,e,\" \"),p=a.mergeNestedRepeated.bind(void 0,o,\",\");a.mergeNonNegativeSizePair=o,a.addPropertiesHandler(n,p,[\"background-size\"]),a.addPropertiesHandler(i,e,[\"border-bottom-width\",\"border-image-width\",\"border-left-width\",\"border-right-width\",\"border-top-width\",\"flex-basis\",\"font-size\",\"height\",\"line-height\",\"max-height\",\"max-width\",\"outline-width\",\"width\"]),a.addPropertiesHandler(i,f,[\"border-bottom-left-radius\",\"border-bottom-right-radius\",\"border-top-left-radius\",\"border-top-right-radius\",\"bottom\",\"left\",\"letter-spacing\",\"margin-bottom\",\"margin-left\",\"margin-right\",\"margin-top\",\"min-height\",\"min-width\",\"outline-offset\",\"padding-bottom\",\"padding-left\",\"padding-right\",\"padding-top\",\"perspective\",\"right\",\"shape-margin\",\"stroke-dashoffset\",\"text-indent\",\"top\",\"vertical-align\",\"word-spacing\"])}(d),function(a,b){function c(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function d(b){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\\(/)),a.consumeRepeated.bind(null,c,/^,/),a.ignore(a.consumeToken.bind(null,/^\\)/))],b);if(d&&4==d[0].length)return d[0]}function e(b,c){return\"auto\"==b||\"auto\"==c?[!0,!1,function(d){var e=d?b:c;if(\"auto\"==e)return\"auto\";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function f(a){return\"rect(\"+a+\")\"}var g=a.mergeWrappedNestedRepeated.bind(null,f,e,\", \");a.parseBox=d,a.mergeBoxes=g,a.addPropertiesHandler(d,g,[\"clip\"])}(d),function(a,b){function c(a){return function(b){var c=0;return a.map(function(a){return a===k?b[c++]:a})}}function d(a){return a}function e(b){if(\"none\"==(b=b.toLowerCase().trim()))return[];for(var c,d=/\\s*(\\w+)\\(([^)]*)\\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=n[g];if(!h)return;var i=c[2].split(\",\"),j=h[0];if(j.length<i.length)return;for(var k=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(void 0===(p=q?{A:function(b){return\"0\"==b.trim()?m:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:m,n:k[0],t:l}[r]))return;k.push(p)}if(e.push({t:g,d:k}),d.lastIndex==b.length)return e}}function f(a){return a.toFixed(6).replace(\".000000\",\"\")}function g(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var e=a.makeMatrixDecomposition(c)}return null==d[0]||null==e[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),e[0].push(1),[d,e,function(b){var c=a.quat(d[0][3],e[0][3],b[5]);return a.composeMatrix(b[0],b[1],b[2],c,b[4]).map(f).join(\",\")}])}function h(a){return a.replace(/[xy]/,\"\")}function i(a){return a.replace(/(x|y|z|3d)?$/,\"3d\")}function j(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var f=0;f<b.length;f++){var j=b[f].t,k=b[f].d,l=\"scale\"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if(\"number\"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var m=function(a,b){return\"perspective\"==a&&\"perspective\"==b||(\"matrix\"==a||\"matrix3d\"==a)&&(\"matrix\"==b||\"matrix3d\"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[[\"matrix\",[r[2]]]]}else for(var f=0;f<b.length;f++){var j,s=b[f].t,t=c[f].t,u=b[f].d,v=c[f].d,w=n[s],x=n[t];if(m(s,t)){if(!d)return;var r=g([b[f]],[c[f]]);o.push(r[0]),p.push(r[1]),q.push([\"matrix\",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&h(s)==h(t))j=h(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||i(s)!=i(t)){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[[\"matrix\",[r[2]]]];break}j=i(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C=\"number\"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(\",\");return\"matrix\"==q[b][0]&&16==c.split(\",\").length&&(q[b][0]=\"matrix3d\"),q[b][0]+\"(\"+c+\")\"}).join(\" \")}]}var k=null,l={px:0},m={deg:0},n={matrix:[\"NNNNNN\",[k,k,0,0,k,k,0,0,0,0,1,0,k,k,0,1],d],matrix3d:[\"NNNNNNNNNNNNNNNN\",d],rotate:[\"A\"],rotatex:[\"A\"],rotatey:[\"A\"],rotatez:[\"A\"],rotate3d:[\"NNNA\"],perspective:[\"L\"],scale:[\"Nn\",c([k,k,1]),d],scalex:[\"N\",c([k,1,1]),c([k,1])],scaley:[\"N\",c([1,k,1]),c([1,k])],scalez:[\"N\",c([1,1,k])],scale3d:[\"NNN\",d],skew:[\"Aa\",null,d],skewx:[\"A\",null,c([k,m])],skewy:[\"A\",null,c([m,k])],translate:[\"Tt\",c([k,k,l]),d],translatex:[\"T\",c([k,l,l]),c([k,l])],translatey:[\"T\",c([l,k,l]),c([l,k])],translatez:[\"L\",c([l,l,k])],translate3d:[\"TTL\",d]};a.addPropertiesHandler(e,j,[\"transform\"]),a.transformToSvgMatrix=function(b){var c=a.transformListToMatrix(e(b));return\"matrix(\"+f(c[0])+\" \"+f(c[1])+\" \"+f(c[4])+\" \"+f(c[5])+\" \"+f(c[12])+\" \"+f(c[13])+\")\"}}(d),function(a){function b(a){var b=Number(a);if(!(isNaN(b)||b<100||b>900||b%100!=0))return b}function c(b){return b=100*Math.round(b/100),b=a.clamp(100,900,b),400===b?\"normal\":700===b?\"bold\":String(b)}function d(a,b){return[a,b,c]}a.addPropertiesHandler(b,d,[\"font-weight\"])}(d),function(a){function b(a){var b={};for(var c in a)b[c]=-a[c];return b}function c(b){return a.consumeToken(/^(left|center|right|top|bottom)\\b/i,b)||a.consumeLengthOrPercent(b)}function d(b,d){var e=a.consumeRepeated(c,/^/,d);if(e&&\"\"==e[1]){var f=e[0];if(f[0]=f[0]||\"center\",f[1]=f[1]||\"center\",3==b&&(f[2]=f[2]||{px:0}),f.length==b){if(/top|bottom/.test(f[0])||/left|right/.test(f[1])){var h=f[0];f[0]=f[1],f[1]=h}if(/left|right|center|Object/.test(f[0])&&/top|bottom|center|Object/.test(f[1]))return f.map(function(a){return\"object\"==typeof a?a:g[a]})}}}function e(d){var e=a.consumeRepeated(c,/^/,d);if(e){for(var f=e[0],h=[{\"%\":50},{\"%\":50}],i=0,j=!1,k=0;k<f.length;k++){var l=f[k];\"string\"==typeof l?(j=/bottom|right/.test(l),i={left:0,right:0,center:i,top:1,bottom:1}[l],h[i]=g[l],\"center\"==l&&i++):(j&&(l=b(l),l[\"%\"]=(l[\"%\"]||0)+100),h[i]=l,i++,j=!1)}return[h,e[1]]}}function f(b){var c=a.consumeRepeated(e,/^,/,b);if(c&&\"\"==c[1])return c[0]}var g={left:{\"%\":0},center:{\"%\":50},right:{\"%\":100},top:{\"%\":0},bottom:{\"%\":100}},h=a.mergeNestedRepeated.bind(null,a.mergeDimensions,\" \");a.addPropertiesHandler(d.bind(null,3),h,[\"transform-origin\"]),a.addPropertiesHandler(d.bind(null,2),h,[\"perspective-origin\"]),a.consumePosition=e,a.mergeOffsetList=h;var i=a.mergeNestedRepeated.bind(null,h,\", \");a.addPropertiesHandler(f,i,[\"background-position\",\"object-position\"])}(d),function(a){function b(b){var c=a.consumeToken(/^circle/,b);if(c&&c[0])return[\"circle\"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\\(/)),d,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\\)/))],c[1]));var f=a.consumeToken(/^ellipse/,b);if(f&&f[0])return[\"ellipse\"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\\(/)),e,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\\)/))],f[1]));var g=a.consumeToken(/^polygon/,b);return g&&g[0]?[\"polygon\"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\\(/)),a.optional(a.consumeToken.bind(void 0,/^nonzero\\s*,|^evenodd\\s*,/),\"nonzero,\"),a.consumeSizePairList,a.ignore(a.consumeToken.bind(void 0,/^\\)/))],g[1])):void 0}function c(b,c){if(b[0]===c[0])return\"circle\"==b[0]?a.mergeList(b.slice(1),c.slice(1),[\"circle(\",a.mergeDimensions,\" at \",a.mergeOffsetList,\")\"]):\"ellipse\"==b[0]?a.mergeList(b.slice(1),c.slice(1),[\"ellipse(\",a.mergeNonNegativeSizePair,\" at \",a.mergeOffsetList,\")\"]):\"polygon\"==b[0]&&b[1]==c[1]?a.mergeList(b.slice(2),c.slice(2),[\"polygon(\",b[1],g,\")\"]):void 0}var d=a.consumeParenthesised.bind(null,a.parseLengthOrPercent),e=a.consumeRepeated.bind(void 0,d,/^/),f=a.mergeNestedRepeated.bind(void 0,a.mergeDimensions,\" \"),g=a.mergeNestedRepeated.bind(void 0,f,\",\");a.addPropertiesHandler(b,c,[\"shape-outside\"])}(d),function(a,b){function c(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(d[a]=b),e[b]=a})}var d={},e={};c(\"transform\",[\"webkitTransform\",\"msTransform\"]),c(\"transformOrigin\",[\"webkitTransformOrigin\"]),c(\"perspective\",[\"webkitPerspective\"]),c(\"perspectiveOrigin\",[\"webkitPerspectiveOrigin\"]),a.propertyName=function(a){return d[a]||a},a.unprefixedPropertyName=function(a){return e[a]||a}}(d)}(),function(){if(void 0===document.createElement(\"div\").animate([]).oncancel){var a;if(window.performance&&performance.now)var a=function(){return performance.now()};else var a=function(){return Date.now()};var b=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type=\"cancel\",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(d,e){var f=c.call(this,d,e);f._cancelHandlers=[],f.oncancel=null;var g=f.cancel;f.cancel=function(){g.call(this);var c=new b(this,null,a()),d=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){d.forEach(function(a){a.call(c.target,c)})},0)};var h=f.addEventListener;f.addEventListener=function(a,b){\"function\"==typeof b&&\"cancel\"==a?this._cancelHandlers.push(b):h.call(this,a,b)};var i=f.removeEventListener;return f.removeEventListener=function(a,b){if(\"cancel\"==a){var c=this._cancelHandlers.indexOf(b);c>=0&&this._cancelHandlers.splice(c,1)}else i.call(this,a,b)},f}}}(),function(a){var b=document.documentElement,c=null,d=!1;try{var e=getComputedStyle(b).getPropertyValue(\"opacity\"),f=\"0\"==e?\"1\":\"0\";c=b.animate({opacity:[f,f]},{duration:1}),c.currentTime=0,d=getComputedStyle(b).getPropertyValue(\"opacity\")==f}catch(a){}finally{c&&c.cancel()}if(!d){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(b,c){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||null===b||(b=a.convertToArrayForm(b)),g.call(this,b,c)}}}(c),b.true=a}({},function(){return this}());",
            "type": "application/javascript",
            "title": "$:/plugins/BTC/Muuri/library/web-animations-polyfill.js",
            "tags": "",
            "module-type": "library",
            "modified": "20200823113733621",
            "created": "20200823113627231"
        },
        "$:/plugins/BTC/Muuri/modules/storyviews/muuri.js": {
            "text": "/*\\\ntitle: $:/plugins/BTC/Muuri/modules/storyviews/muuri.js\ntype: application/javascript\nmodule-type: storyview\n\nViews the story as a muuri grid\n\n\\*/\n(function() {\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar easing = \"cubic-bezier(0.215, 0.61, 0.355, 1)\";\n\nvar COLUMN_CONFIG = \"$:/config/muuri/storyview/columns\",\n\tSEAMLESS_CONFIG = \"$:/config/muuri/storyview/fill-gaps\",\n\tALIGNRIGHT_CONFIG = \"$:/config/muuri/storyview/align-right\",\n\tALIGNBOTTOM_CONFIG = \"$:/config/muuri/storyview/align-bottom\",\n\tDRAGSORTACTION_CONFIG = \"$:/config/muuri/storyview/dragsort-action\",\n\tDRAGSORTTHRESHOLD_CONFIG =\"$:/config/muuri/storyview/dragsort-threshold\",\n\tSELECTTEXT_CONFIG = \"$:/config/muuri/storyview/select-text\";\n\nif(typeof window !== \"undefined\") {\n\tvar testElement = document.body;\n\tif(typeof testElement.animate !== \"function\" && typeof testElement.animate !== \"FUNCTION\") {\n\t\trequire(\"$:/plugins/BTC/Muuri/library/web-animations-polyfill.js\");\n\t}\n\tif(!window.Muuri) {\n\t\twindow.Muuri = require(\"$:/plugins/BTC/Muuri/library/muuri.min.js\");\n\t}\n\tif($tw.Grids === undefined) {\n\t\t$tw.Grids = [];\n\t}\n}\n\nvar MuuriStoryView = function(listWidget) {\n\tvar self = this;\n\tthis.listWidget = listWidget;\n\tthis.itemTitlesArray = [];\n\tthis.connectedGrids = [];\n\n\tthis.getMuuriAttributes();\n\tthis.createMuuriGrid();\n\n\tthis.addToGlobalGrids();\n\n\tthis.muuri.on(\"dragReleaseEnd\",function(item) {\n\t\tself.onDragReleaseEnd(item);\n\t})\n\t.on(\"add\", function(items) {\n\t\tself.updateZIndexList();\n\t})\n\t.on(\"remove\", function(items) {\n\t\tself.updateZIndexList();\n\t})\n\t.on(\"dragEnd\", function(item, event) {\n\t\tself.restoreIframeEvents();\n\t})\n\t.on(\"dragStart\", function(item, event) {\n\t\tself.isDragging = true;\n\t\tself.findConnectedGrids();\n\t})\n\t.on(\"layoutStart\", function() {\n\t})\n\t.on(\"layoutEnd\", function() {\n\t\tself.updateZIndexList();\n\t})\n\t.on(\"destroy\", function() {\n\t\tself.removeFromGlobalGrids();\n\t\tself.removeAllListeners();\n\t})\n\t.on(\"dragInit\",function(item, event) {\n\t\t//add pointer-events: none; to all iframes\n\t\tself.inheritIframeEvents();\n\t})\n\t.on(\"send\", function(data) {\n\t\tself.updateConnectedGrids();\n\t})\n\t.on(\"receive\", function(data) {\n\t\tself.updateConnectedGrids();\n\t})\n\t.on(\"beforeSend\", function(data) {\n\t\tself.updateConnectedGrids();\n\t})\n\t.on(\"beforeReceive\", function(data) {\n\t\tself.updateConnectedGrids();\n\t});\n};\n\nMuuriStoryView.prototype.updateConnectedGrids = function() {\n\tfor(var i=0; i<this.connectedGrids.length; i++) {\n\t\tvar grid = this.connectedGrids[i];\n\t\tgrid.refreshItems();\n\t\tgrid._refreshDimensions();\n\t\tgrid.layout();\n\t}\n};\n\nMuuriStoryView.prototype.findConnectedGrids = function() {\n\tvar self = this,\n\t\tconnectedGrids = this.listWidget.document.documentElement.querySelectorAll(this.connectedGridsSelector),\n\t\t\tnewConnectedGrids = [];\n\tif(connectedGrids.length > 0) {\n\t\tfor(var i=0; i<$tw.Grids.length; i++) {\n\t\t\tfor(var k=0; k<connectedGrids.length; k++) {\n\t\t\t\tif($tw.Grids[i]._element === connectedGrids[k]) {\n\t\t\t\t\t$tw.utils.pushTop(newConnectedGrids,$tw.Grids[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t$tw.utils.pushTop(newConnectedGrids,this.muuri);\n\t\tthis.connectedGrids = newConnectedGrids;\n\t} else {\n\t\tthis.connectedGrids = [this.muuri];\n\t}\n};\n\nMuuriStoryView.prototype.addToGlobalGrids = function() {\n\t$tw.utils.pushTop($tw.Grids,this.muuri);\n\tvar globalGridElements = this.listWidget.document.documentElement.querySelectorAll('[data-grid=\"muuri\"]');\n\tfor(var i=0; i<$tw.Grids.length; i++) {\n\t\tvar globalGrid = $tw.Grids[i],\n\t\t\t\tfoundGrid = false;\n\t\tfor(var k=0; k<globalGridElements.length; k++) {\n\t\t\tvar globalGridElement = globalGridElements[k];\n\t\t\tif(globalGrid._element === globalGridElement) {\n\t\t\t\tfoundGrid = true;\n\t\t\t}\n\t\t}\n\t\tif(!foundGrid) {\n\t\t\t$tw.Grids.splice(i,1);\n\t\t}\n\t}\n};\n\nMuuriStoryView.prototype.removeFromGlobalGrids = function() {\n\tfor(var i=0; i<$tw.Grids.length; i++) {\n\t\tvar grid = $tw.Grids[i];\n\t\tif(grid._element === this.muuri._element) {\n\t\t\t$tw.Grids.splice(i,1);\n\t\t}\n\t}\n};\n\nMuuriStoryView.prototype.updateZIndexList = function(options) {\n\tvar self = this;\n\tif(this.zIndexTiddler) {\n\t\toptions = options || {};\n\t\t//do something that updates z-indices\n\t\tthis.muuri.refreshItems(); //important\n\t\tvar items = this.muuri.getItems();\n\t\tvar itemColumns = [];\n\t\tvar sortedArray = [];\n\t\t//get the x-coordinates for each column\n\t\tfor(var i=0; i<items.length; i++) {\n\t\t\tvar itemColumnsValue = items[i]._left !== null && items[i]._left !== undefined ? items[i]._left : items[i]._layout._currentLeft;\n\t\t\tif(itemColumns.indexOf(itemColumnsValue) === -1) {\n\t\t\t\titemColumns.push(itemColumnsValue);\n\t\t\t}\n\t\t}\n\t\t//sort the columns left-to-right\n\t\titemColumns.sort(function(valueA,valueB) {\n\t\t\tif(valueA >= valueB) return 1;\n\t\t\tif(valueA < valueB) return -1;\n\t\t\treturn 0;\n\t\t});\n\t\t//now for each column, get the items that are members of it,\n\t\t//push to a temporary array\n\t\t//sort the temp array items so that by their _currentTop lowest to highest\n\t\t//push the sorted items to the final sortedItems array\n\t\t$tw.utils.each(itemColumns,function(columnValue) {\n\t\t\tvar columnMembers = [];\n\t\t\tfor(var k=0; k<items.length; k++) {\n\t\t\t\tvar currLeft = items[k]._left !== null && items[k]._left !== undefined ? items[k]._left : items[k]._layout._currentLeft;\n\t\t\t\tif(currLeft === columnValue || (currLeft >= (columnValue - 5) && currLeft <= columnValue)) {\n\t\t\t\t\t// there's a small variation when item positions have not yet been fully\n\t\t\t\t\t// refreshed after they've moved ... some pixels, though they're still in\n\t\t\t\t\t// the same column\n\t\t\t\t\t// because of the min-width on tiddlers, 5px should be ok\n\t\t\t\t\tcolumnMembers.push(items[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcolumnMembers.sort(function(itemA,itemB) {\n\t\t\t\tvar valueA = itemA._layout._currentTop !== null && itemA._layout._currentTop !== undefined ? itemA._layout._currentTop : itemA._top,\n\t\t\t\t\tvalueB = itemB._layout._currentTop !== null && itemB._layout._currentTop !== undefined ? itemB._layout._currentTop : itemB._top;\n\t\t\t\tif(valueA >= valueB) return 1;\n\t\t\t\tif(valueA < valueB) return -1;\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t\tfor(k=0; k<columnMembers.length; k++) {\n\t\t\t\tvar itemTitle = self.getItemTitle(columnMembers[k]);\n\t\t\t\tsortedArray.push(itemTitle);\n\t\t\t}\n\t\t});\n\t\t//store the array in a tiddler-list that's used for applying z-indices\n\t\tvar tiddler = this.listWidget.wiki.getTiddler(this.zIndexTiddler);\n\t\tthis.listWidget.wiki.addTiddler(new $tw.Tiddler(\n\t\t\tthis.listWidget.wiki.getCreationFields(),\n\t\t\t{title: this.zIndexTiddler},\n\t\t\ttiddler,\n\t\t\t{list: sortedArray},\n\t\t\tthis.listWidget.wiki.getModificationFields()\n\t\t));\n\t}\n};\n\nMuuriStoryView.prototype.restoreIframeEvents = function() {\n\tif(this.iframePointerEventStyle !== undefined) {\n\t\tvar iframes = this.listWidget.document.querySelectorAll(\"iframe\");\n\t\tfor(var i=0; i<iframes.length; i++) {\n\t\t\tiframes[i].style[\"pointer-events\"] = this.iframePointerEventStyle;\n\t\t}\n\t\tthis.iframePointerEventStyle = undefined;\n\t}\n};\n\nMuuriStoryView.prototype.inheritIframeEvents = function() {\n\tvar iframes = this.listWidget.document.querySelectorAll(\"iframe\");\n\tfor(var i=0; i<iframes.length; i++) {\n\t\tif(iframes[i]) {\n\t\t\tif(this.iframePointerEventStyle === undefined) {\n\t\t\t\tthis.iframePointerEventStyle = iframes[i].style[\"pointer-events\"];\n\t\t\t}\n\t\t\tiframes[i].style[\"pointer-events\"] = \"none\";\n\t\t}\n\t}\n};\n\nMuuriStoryView.prototype.removeAllListeners = function() {\n\tvar items = this.muuri.getItems();\n\tfor(var i=0; i<items.length; i++) {\n\t\tvar element = items[i].getElement();\n\t\tthis.removeResizeListener(element,function() {\n\t\t\tself.refreshMuuriGrid();\n\t\t});\n\t}\n};\n\nMuuriStoryView.prototype.refreshItemTitlesArray = function() {\n\tthis.muuri.refreshItems();\n\tthis.findConnectedGrids();\n\tvar items = this.muuri.getItems(),\n\t\t\tmuuriItems = [];\n\tthis.itemTitlesArray = [];\n\tfor(var i=0; i<items.length; i++) {\n\t\tif(items[i]._width !== 0 && items[i]._height !== 0) {\n\t\t\tthis.itemTitlesArray.push(this.getItemTitle(items[i]));\n\t\t\tmuuriItems.push(items[i]);\n\t\t}\n\t}\n\tthis.muuri._items = muuriItems;\n\titems = this.muuri.getItems();\n\tfor(i=0; i<items.length; i++) {\n\t\titems[i]._id = i;\n\t}\n};\n\nMuuriStoryView.prototype.findListWidget = function(element) {\n\tfor(var i=0; i<this.connectedGrids.length; i++) {\n\t\tvar listWidgetChildren = this.connectedGrids[i].listWidget.children;\n\t\t//find the widget corresponding to this element\n\t\tfor(var k=0; k<listWidgetChildren.length; k++) {\n\t\t\tvar listElement = listWidgetChildren[k] ? listWidgetChildren[k].findFirstDomNode() : null;\n\t\t\tif(listElement && (listElement === element)) {\n\t\t\t\treturn(listWidgetChildren[k]);\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n};\n\nMuuriStoryView.prototype.getItemTitle = function(item) {\n\tvar element = item._element;\n\tvar widget = this.findListWidget(element);\n\treturn widget ? widget.parseTreeNode.itemTitle : null;\n};\n\nMuuriStoryView.prototype.onDragReleaseEnd = function(item) {\n\tvar self = this;\n\tvar items = this.muuri.getItems(),\n\t\t\tisReleasing = false;\n\tfor (var i=0; i<items.length; i++) {\n\t\tif(items[i].isDragging() || items[i].isReleasing() || items[i].isShowing() || items[i].isHiding()) {\n\t\t\tisReleasing = true;\n\t\t}\n\t}\n\tthis.findConnectedGrids();\n\tif(isReleasing === false) {\n\t\tfor(i=0; i<this.connectedGrids.length; i++) {\n\t\t\tthis.connectedGrids[i].synchronizeGrid();\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\tself.isDragging = false;\n\t\t},self.animationDuration);\n\t}\n};\n\nMuuriStoryView.prototype.synchronizeGrid = function() {\n\tthis.refreshItemTitlesArray();\n\tthis.muuri.synchronize();\n\tvar hasChanged = false;\n\tif(this.itemTitlesArray.length !== this.listWidget.list.length) {\n\t\thasChanged = true;\n\t} else {\n\t\tfor(var i=0; i<this.itemTitlesArray.length; i++) {\n\t\t\tif(this.itemTitlesArray[i] !== this.listWidget.list[i]) {\n\t\t\t\thasChanged = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif(hasChanged && this.itemTitlesArray.indexOf(undefined) === -1 && this.itemTitlesArray.indexOf(null) === -1) {\n\t\tthis.listWidget.wiki.setText(this.storyListTitle,this.storyListField,undefined,this.itemTitlesArray);\n\t}\n};\n\nMuuriStoryView.prototype.getMuuriAlignmentAttributes = function() {\n\tthis.alignmentLayoutMethodChange = false;\n\tthis.alignRight = this.listWidget.getAttribute(\"alignRight\",this.listWidget.wiki.getTiddlerText(ALIGNRIGHT_CONFIG)) !== \"no\";\n\tthis.alignSelect = this.listWidget.wiki.getTiddlerText(ALIGNBOTTOM_CONFIG);\n\tthis.alignBottom = false;\n\tvar prevAlignRows = this.alignRows;\n\tthis.alignRows = false;\n\tif(this.alignSelect === \"1\") {\n\t\tthis.alignBottom = true;\n\t}\n\telse if(this.alignSelect === \"2\") {\n\t\tthis.alignRows = true;\n\t}\n\tif(this.alignRows !== prevAlignRows) {\n\t\tthis.alignmentLayoutMethodChange = true;\n\t}\n};\n\nMuuriStoryView.prototype.getMuuriAttributes = function() {\n\tthis.animationDuration = $tw.utils.getAnimationDuration();\n\tthis.attachEvent = this.listWidget.document.attachEvent;\n\tthis.isIE = $tw.browser.isIE;\n\tthis.containerClass = this.listWidget.getAttribute(\"containerClass\",\"tc-muuri-river\");\n\tthis.rounding = true;\n\tvar itemClass = this.listWidget.getAttribute(\"itemClass\",\"tc-tiddler-frame\");\n\tif(itemClass === \"\" || itemClass === \"*\") {\n\t\tthis.itemSelector = \"*\";\n\t\tthis.itemClass = \"tc-muuri-item\";\n\t} else {\n\t\tvar classes = itemClass.split(\" \");\n\t\tthis.itemSelector = \".\" + classes[0];\n\t\tthis.itemClass = classes[0];\n\t}\n\tthis.connectedGridsSelector = this.listWidget.getAttribute(\"connectionSelector\");\n\tthis.noDragTags = [\"input\",\"INPUT\",\"textarea\",\"TEXTAREA\",\"button\",\"BUTTON\",\"select\",\"SELECT\"];\n\tthis.dragSortInterval = parseInt(this.listWidget.getAttribute(\"dragSortInterval\",\"100\"));\n\tthis.dragSortAction = this.listWidget.getAttribute(\"dragSortAction\",this.storyListTitle === \"$:/StoryList\" ? this.listWidget.wiki.getTiddlerText(DRAGSORTACTION_CONFIG) : \"move\");\n\tthis.dragSortThreshold = parseInt(this.listWidget.getAttribute(\"dragSortThreshold\",this.storyListTitle === \"$:/StoryList\" ? this.listWidget.getTiddlerText(DRAGSORTTHRESHOLD_CONFIG) : \"40\"));\n\tvar dragHandle = this.listWidget.getAttribute(\"dragHandle\",null);\n\tif(dragHandle === \"\") {\n\t\tdragHandle = null;\n\t}\n\tthis.dragHandle = dragHandle;\n//\tthis.fillGaps = this.listWidget.getAttribute(\"fillGaps\",this.listWidget.wiki.getTiddlerText(SEAMLESS_CONFIG)) === \"yes\";\n\tthis.alignRight = this.listWidget.getAttribute(\"alignRight\",this.listWidget.wiki.getTiddlerText(ALIGNRIGHT_CONFIG)) !== \"no\";\n\tthis.alignBottom = this.listWidget.getAttribute(\"alignBottom\",this.listWidget.wiki.getTiddlerText(ALIGNBOTTOM_CONFIG)) === \"yes\";\n\tthis.dragEnabled = this.listWidget.getAttribute(\"selectText\",this.listWidget.wiki.getTiddlerText(SELECTTEXT_CONFIG)) !== \"yes\";\n\tthis.storyListTitle = this.listWidget.getAttribute(\"storyList\",\"$:/StoryList\");\n\tthis.storyListField = this.listWidget.getAttribute(\"storyListField\",\"list\");\n\tthis.zIndexTiddler = this.listWidget.getAttribute(\"zIndexTiddler\",this.storyListTitle === \"$:/StoryList\" ? \"$:/state/muuri/tiddlers/z-indices\" : null);\n\tthis.horizontal = false;\n\tthis.itemTemplate = this.listWidget.getAttribute(\"template\");\n\tthis.itemEditTemplate = this.listWidget.getAttribute(\"editTemplate\");\n\tthis.columns = parseInt(this.listWidget.getAttribute(\"columns\",this.listWidget.wiki.getTiddlerText(COLUMN_CONFIG)));\n}\n\nMuuriStoryView.prototype.createMuuriGrid = function() {\n\tvar self = this;\n\tthis.muuriOptions = this.collectMuuriOptions();\n\tvar domNode = this.listWidget.parentDomNode;\n\tdomNode.setAttribute(\"data-grid\",\"muuri\");\n\tthis.muuri = new Muuri(domNode,self.muuriOptions);\n\t$tw.wiki.addEventListener(\"change\",function(changes) {\n\t\tself.muuriRefresh(changes);\n\t});\n\tthis.muuri.listWidget = this.listWidget;\n\tvar items = this.muuri.getItems();\n\tthis.findConnectedGrids();\n\tfor(var i=0; i<items.length; i++) {\n\t\tvar element = items[i].getElement();\n\t\tthis.itemTitlesArray.push(this.getItemTitle(items[i]));//element.dataset.tiddlerTitle);\n\t\tthis.addResizeListener(element,function() {\n\t\t\tself.refreshMuuriGrid();\n\t\t});\n\t}\n\tthis.addResizeListener(self.muuri._element,function() {\n\t\tself.refreshMuuriGrid();\n\t});\n\n\tthis.muuri.synchronizeGrid = function() {\n\t\tself.synchronizeGrid();\n\t};\n\tthis.muuri.getItemTitle = function(item) {\n\t\tself.getItemTitle(item);\n\t};\n};\n\nMuuriStoryView.prototype.muuriLayoutOptionDefault = function() {\n\tvar self = this;\n\treturn {\n\t\tfillGaps: false,\n\t\thorizontal: self.horizontal,\n\t\talignRight: self.alignRight,\n\t\talignBottom: self.alignBottom,\n\t\trounding: self.rounding\n\t};\n};\n\nMuuriStoryView.prototype.muuriLayoutOptionRows = function() {\n\tvar self = this;\n\tif( self.alignRight ) {\n\t\treturn function (grid,layoutId,items,width,height,callback) {\n\t\t\tvar layout = {\n\t\t\t\tid: layoutId,\n\t\t\t\titems: items,\n\t\t\t\tslots: [],\n\t\t\t\tstyles: {},\n\t\t\t};\n\t\t\tvar item,\n\t\t\t\tm,\n\t\t\t\tx = 0,\n\t\t\t\ty = 0,\n\t\t\t\tw = 0,\n\t\t\t\th = 0;\n\n\t\t\tvar iteminarow = 0;\n\t\t\tvar rowmaxheight = 0;\n\t\t\tvar maxrowwidth = 0;\n\n\t\t\t// Let's not trust the available client area, calculate the max.width\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\titeminarow++;\n\t\t\t\tif ( iteminarow > self.columns) {\n\t\t\t\t\titeminarow = 1;\n\t\t\t\tif ( x > maxrowwidth )\n\t\t\t\t\tmaxrowwidth = x;\n\t\t\t\t\tx = 0;\n\t\t\t  \t}\n\t\t\t\titem = items[i];\n\t\t\t\tm = item.getMargin();\n\t\t\t\th = item.getHeight() + m.top + m.bottom;\n\t\t\t\tw = item.getWidth() + m.left + m.right;\n\t\t\t\tx += w;\n\t\t\t}\n\n\t\t\tx = maxrowwidth;\n\t\t\ty = 0;\n\t\t\tw = 0;\n\t\t\th = 0;\n\t\t\titeminarow = 0;\n\t\t\trowmaxheight = 0;\n\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\titeminarow++;\n\t\t\t\tif ( iteminarow > self.columns) {\n\t\t\t\t\titeminarow = 1;\n\t\t\t\t\ty += rowmaxheight;\n\t\t\t\t\trowmaxheight = 0;\n\t\t\t\t\tx = maxrowwidth;\n\t\t\t  \t}\n\t\t\t\titem = items[i];\n\t\t\t\tm = item.getMargin();\n\t\t\t\th = item.getHeight() + m.top + m.bottom;\n\t\t\t\tif ( rowmaxheight < h ) {\n\t\t\t\t\trowmaxheight = h;\n\t\t\t\t}\n\t\t\t\tw = item.getWidth() + m.left + m.right;\n\t\t\t\tx -= w;\n\t\t\t\tlayout.slots.push(x, y);\n\t\t\t}\n\n\t\t\tw -= x;\n\t\t\th += y;\n\n\t\t\t// Set the CSS styles that should be applied\n\t\t\t// to the grid element.\n\t\t\tlayout.styles.width = w + 'px';\n\t\t\tlayout.styles.height = h + 'px';\n\n\t\t\t// When the layout is fully computed\n\t\t\t// let's call the callback function and\n\t\t\t// provide the layout object as it's argument.\n\t\t\tcallback(layout);\n\t\t};\n\t} else {\n\t\treturn function(grid,layoutId,items,width,height,callback) {\n\t\t\t\tvar layout = {\n\t\t\t\tid: layoutId,\n\t\t\t\titems: items,\n\t\t\t\tslots: [],\n\t\t\t\tstyles: {},\n\t\t\t};\n\t\t\tvar item,\n\t\t\tm,\n\t\t\tx = 0,\n\t\t\ty = 0,\n\t\t\tw = 0,\n\t\t\th = 0,\n\t\t\titeminarow = 0,\n\t\t\trowmaxheight = 0;\n\t\t\tfor(var i=0; i<items.length;i++) {\n\t\t\t\titeminarow++;\n\t\t\t\tif(iteminarow > self.columns) {\n\t\t\t\t\titeminarow = 1;\n\t\t\t\t\ty += rowmaxheight;\n\t\t\t\t\trowmaxheight = 0;\n\t\t\t\t\tx = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx += w;\n\t\t\t\t}\n\t\t\t\titem = items[i];\n\t\t\t\tm = item.getMargin();\n\t\t\t\th = item.getHeight() + m.top + m.bottom;\n\t\t\t\tif(rowmaxheight < h) {\n\t\t\t\t\trowmaxheight = h;\n\t\t\t\t}\n\t\t\t\tw = item.getWidth() + m.left + m.right;\n\t\t\t\tlayout.slots.push(x, y);\n\t\t\t};\n            w -= x;\n            h += y;\n\n            // Set the CSS styles that should be applied\n            // to the grid element.\n            layout.styles.width = w + 'px';\n            layout.styles.height = h + 'px';\t\t\t// When the layout is fully computed\n\t\t\t// let's call the callback function and\n\t\t\t// provide the layout object as it's argument.\n\t\t\tcallback(layout);\n\t\t};\n\t}\n};\n\nMuuriStoryView.prototype.collectMuuriOptions = function() {\n\tvar self = this;\n\treturn {\n\t\titems: self.itemSelector,\n\t\tdragEnabled: self.dragEnabled,\n\t\tdragHandle: self.dragHandle,\n\t\tcolumns: self.columns,\n\t\tlayout: (self.alignRows ? self.muuriLayoutOptionRows() : self.muuriLayoutOptionDefault()),\n\t\tdragSortPredicate: {\n\t\t\taction: self.dragSortAction,\n\t\t\tthreshold: self.dragSortThreshold\n\t\t},\n\t\tlayoutEasing: easing,\n\t\tdragStartPredicate: function (item,e) {\n\t\t\tvar items = self.muuri.getItems(),\n\t\t\t\tisReleasing = false;\n\t\t\tfor (var i=0; i<items.length; i++) {\n\t\t\t\tif(items[i].isDragging() || items[i].isReleasing() || items[i].isShowing() || items[i].isHiding() || items[i].isPositioning()) {\n\t\t\t\t\tisReleasing = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (self.muuri._settings.dragEnabled) {\n\t\t\t\tif(isReleasing || (e.target && e.target.tagName && (self.noDragTags.indexOf(e.target.tagName) > -1 || self.lookupDragTarget(e.target)) || self.detectWithinCodemirror(e) || !self.detectGridWithinGrid(e.target))) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn Muuri.ItemDrag.defaultStartPredicate(item,e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tdragSort: function () {\n\t\t\tself.findConnectedGrids();\n\t\t\treturn self.connectedGrids;\n\t\t},\n\t\tdragSortInterval: self.dragSortInterval,\n\t\tshowDuration: self.animationDuration,\n\t\tlayoutDuration: self.animationDuration,\n\t\tlayoutOnResize: true,\n\t\tcontainerClass: self.containerClass,\n\t\titemClass: self.itemClass,\n\t\titemDraggingClass: \"tc-muuri-dragging\",\n\t\titemReleasingClass: \"tc-muuri-releasing\",\n\t\titemPositioningClass: \"tc-muuri-positioning\"\n\t};\n};\n\nMuuriStoryView.prototype.detectWithinCodemirror = function(event) {\n\tvar node = event.target;\n\twhile(node) {\n\t\tif(node.classList && ((node.classList.contains(\"CodeMirror-scroll\")) || (node.classList.contains(\"CodeMirror\")))) {\n\t\t\treturn true;\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\treturn false;\n};\n\nMuuriStoryView.prototype.lookupDragTarget = function(element) {\n\tvar count = 0,\n\t\tnode = element.parentNode;\n\twhile(node && count < 10) {\n\t\tif(this.noDragTags.indexOf(node.tagName) > -1) {\n\t\t\treturn true;\n\t\t}\n\t\tnode = node.parentNode;\n\t\tcount += 1;\n\t}\n\treturn false;\n};\n\nMuuriStoryView.prototype.detectGridWithinGrid = function(element) {\n\tvar gridNode = this.muuri.getItems()[0] ? this.muuri.getItems()[0].getGrid()._element : null;\n\n\tif(!gridNode) {\n\t\treturn true;\n\t}\n\tvar elementChildNodes = element.childNodes;\n\tvar isCurrentGrid = false,\n\t\tfoundGrid = false;\n\n\tif(elementChildNodes.length === 0) {\n\t\treturn true;\n\t}\n\t$tw.utils.each(elementChildNodes,function(node) {\n\t\twhile(node && !foundGrid) {\n\t\t\tif(node instanceof Element && node.getAttribute(\"data-grid\") === \"muuri\") {\n\t\t\t\t//dragging within a grid\n\t\t\t\t//see if the found grid is the current grid node\n\t\t\t\tif(node !== gridNode) {\n\t\t\t\t\tfoundGrid = true;\n\t\t\t\t\tisCurrentGrid = false;\n\t\t\t\t} else {\n\t\t\t\t\tisCurrentGrid = true;\n\t\t\t\t\tfoundGrid = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t});\n\treturn isCurrentGrid;\n};\n\nMuuriStoryView.prototype.resizeListener = function(e) {\n\tvar win = e.target || e.srcElement;\n\tif (win.__resizeRAF__) $tw.pageScroller.cancelAnimationFrame.call(win,win.__resizeRAF__);\n\twin.__resizeRAF__ = $tw.pageScroller.requestAnimationFrame.call(win,function(){\n\t\tvar trigger = win.__resizeTrigger__;\n\t\t$tw.utils.each(trigger.__resizeListeners__,function(fn){\n\t\t\tfn.call(trigger, e);\n\t\t});\n\t});\n};\n\nMuuriStoryView.prototype.addResizeListener = function(element,fn) {\n\tvar self = this;\n\tif(element) {\n\t\tif(!element.__resizeListeners__) {\n\t\t\telement.__resizeListeners__ = [];\n\t\t\tif(this.attachEvent) {\n\t\t\t\telement.__resizeTrigger__ = element;\n\t\t\t\telement.attachEvent('onresize',self.resizeListener);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(getComputedStyle(element).position == 'static') element.style.position = 'relative';\n\t\t\t\tvar obj = element.__resizeTrigger__ = self.listWidget.document.createElement('object');\n\t\t\t\tobj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\t\t\t\tobj.__resizeElement__ = element;\n\t\t\t\tobj.onload = function(e) {\n\t\t\t\t\tobj.contentDocument.defaultView.__resizeTrigger__ = obj.__resizeElement__;\n\t\t\t\t\tobj.contentDocument.defaultView.addEventListener(\"resize\",self.resizeListener);\n\t\t\t\t};\n\t\t\t\tobj.type = 'text/html';\n\t\t\t\tif(self.isIE) element.appendChild(obj);\n\t\t\t\tobj.data = 'about:blank';\n\t\t\t\tif(!self.isIE) element.appendChild(obj);\n\t\t\t}\n\t\t\telement.__resizeListeners__.push(fn);\n\t\t} else {\n\t\t\telement.__resizeListeners__.push(fn);\n\t\t}\n\t}\n};\n\nMuuriStoryView.prototype.removeResizeListener = function(element,fn) {\n\tif(element) {\n\t\tif(!element.__resizeListeners__) {\n\t\t\telement.__resizeListeners__ = [];\n\t\t}\n\t\telement.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n\t\tif(!element.__resizeListeners__.length) {\n\t\t\tif(this.attachEvent) element.detachEvent('onresize', this.resizeListener);\n\t\t\telse {\n\t\t\t\tthis.listWidget.document.defaultView.removeEventListener('resize', this.resizeListener);\n\t\t\t\telement.__resizeTrigger__ = this.isNode(element.__resizeTrigger__) && element.__resizeTrigger__ !== undefined ? !element.removeChild(element.__resizeTrigger__) : undefined;\n\t\t\t}\n\t\t}\n\t}\n};\n\nMuuriStoryView.prototype.refreshMuuriGrid = function(item) {\n\tvar self = this;\n\tthis.columns = parseInt(this.listWidget.getAttribute(\"columns\",this.listWidget.wiki.getTiddlerText(COLUMN_CONFIG)));\n\tthis.muuri.refreshItems();\n\tthis.muuri._refreshDimensions();\n\tthis.muuri.layout(); //no .layout(true), make tiddlers move, not jump instantly\n};\n\nMuuriStoryView.prototype.isNode = function(o) {\n\treturn (\n\t\ttypeof Node === \"object\" ? o instanceof Node : o && typeof o === \"object\" && typeof o.nodeType === \"number\" && typeof o.nodeName===\"string\"\n\t);\n};\n\nMuuriStoryView.prototype.insert = function(widget) {\n\tvar self = this;\n\tvar targetElement = widget.findFirstDomNode();\n\tif(!(targetElement instanceof Element)) {\n\t\treturn;\n\t}\n\tthis.refreshItemTitlesArray();\n\tvar itemTitle = widget.parseTreeNode.itemTitle;\n\tvar targetIndex = this.listWidget.findListItem(0,itemTitle);\n\tif(this.itemTitlesArray.indexOf(itemTitle) !== -1) {\n\t\tvar index = this.itemTitlesArray.indexOf(itemTitle),\n\t\t\titems = this.muuri.getItems();\n\t\t//this.muuri.remove([items[index]],{removeElements: true, layout: false})\n\t\tthis.muuri._items.splice(index,1);\n\t\tthis.muuri.refreshItems();\n\t}\n\tif(!this.isDragging) {\n\t\tsetTimeout(function(){\n\t\t\tself.muuri.add(targetElement,{index: targetIndex, instant: true});\n\t\t\tself.addResizeListener(targetElement,function() {\n\t\t\t\tself.refreshMuuriGrid();\n\t\t\t});\n\t\t\tself.refreshItemTitlesArray();\n\t\t},0);\n\t} else {\n\t\tthis.muuri.add(targetElement,{index: targetIndex, instant: true});\n\t\tthis.addResizeListener(targetElement,function() {\n\t\t\tself.refreshMuuriGrid();\n\t\t});\n\t\tthis.refreshItemTitlesArray();\n\t}\n};\n\nMuuriStoryView.prototype.remove = function(widget) {\n\tvar self = this;\n\tvar targetElement = widget.findFirstDomNode();\n\tvar removeElement = function() {\n\t\twidget ? widget.removeChildDomNodes() : null;\n\t};\n\tif(!targetElement instanceof Element) {\n\t\tremoveElement();\n\t\treturn;\n\t}\n\tremoveElement();\n\t\tthis.removeResizeListener(targetElement,function() {\n\t\tself.refreshMuuriGrid();\n\t});\n\tif(!this.isDragging) {\n\t\tthis.muuri.refreshItems();\n\t\tself.refreshItemTitlesArray();\n\t\tsetTimeout(function(){\n\t\t\tself.muuri.remove([targetElement],{removeElements: true});\n\t\t\tself.muuri.layout();\n\t\t},0);\n\t} else {\n\t\tthis.refreshItemTitlesArray();\n\t\tthis.muuri.refreshItems();\n\t\tthis.muuri.remove([targetElement],{removeElements: true});\n\t\tthis.muuri.layout();\n\t}\n};\n\nMuuriStoryView.prototype.navigateTo = function(historyInfo) {\n\tvar listElementIndex = this.listWidget.findListItem(0,historyInfo.title);\n\tif(listElementIndex === undefined) {\n\t\treturn;\n\t}\n\tvar listItemWidget = this.listWidget.children[listElementIndex],\n\t\ttargetElement = listItemWidget.findFirstDomNode();\n\t// Abandon if the list entry isn\"t a DOM element (it might be a text node)\n\tif(!(targetElement instanceof Element)) {\n\t\treturn;\n\t}\n\t// Scroll the node into view\n\tthis.listWidget.dispatchEvent({type: \"tm-scroll\", target: targetElement});\n};\n\nMuuriStoryView.prototype.muuriRefresh = function(changedTiddlers) {\n\tvar self = this;\n\tvar changedAttributes = this.listWidget.computeAttributes();\n\tif(changedTiddlers[\"$:/config/AnimationDuration\"]) {\n\t\tthis.muuri._settings.showDuration = this.muuri._settings.layoutDuration = this.animationDuration = $tw.utils.getAnimationDuration();\n\t}\n\tif(changedTiddlers[COLUMN_CONFIG]) {\n\t\tthis.columns = parseInt(this.listWidget.getAttribute(\"columns\",this.listWidget.wiki.getTiddlerText(COLUMN_CONFIG)));\n\t\tthis.muuri.refreshItems();\n\t\tthis.muuri.layout();\n\t\tthis.muuri.synchronize();\n\t}\n\tif(changedTiddlers[SELECTTEXT_CONFIG] || changedAttributes.selectText) {\n\t\tthis.muuri._settings.dragEnabled = this.dragEnabled = this.listWidget.getAttribute(\"selectText\",this.listWidget.wiki.getTiddlerText(SELECTTEXT_CONFIG)) !== \"yes\";\n\t\tvar items = this.muuri.getItems();\n\t\tvar elements = [];\n\t\tfor(var i=0; i<items.length; i++) {\n\t\t\telements.push(items[i]._element);\n\t\t}\n\t\tthis.muuri.remove(items,{removeElements:true,layout:false});\n\t\tthis.muuri.add(elements,{layout:false});\n\t\tthis.muuri.layout(true);\n\t}\n\tif(changedTiddlers[ALIGNRIGHT_CONFIG] || changedAttributes.alignRight) {\n\t\tthis.muuri._settings.layout.alignRight = this.alignRight = this.listWidget.getAttribute(\"alignRight\",this.listWidget.wiki.getTiddlerText(ALIGNRIGHT_CONFIG)) !== \"no\";\n\t\tif(this.alignRows) {\n\t\t\tthis.muuri._settings.layout = this.muuriLayoutOptionRows();\n\t\t}\n\t\tthis.muuri.refreshItems();\n\t\tthis.muuri._refreshDimensions();\n\t\tthis.muuri.layout();\n\t}\n\tif(changedTiddlers[ALIGNBOTTOM_CONFIG] || changedAttributes.alignBottom) {\n\t\tthis.getMuuriAlignmentAttributes();\n\t\tif(this.alignmentLayoutMethodChange) {\n\t\t\tif(this.alignRows) {\n\t\t\t\tthis.muuri._settings.layout = this.muuriLayoutOptionRows();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.muuri._settings.layout = this.muuriLayoutOptionDefault();\n\t\t\t\tthis.muuri._settings.layout.alignBottom = this.alignBottom;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.muuri._settings.layout.alignBottom = this.alignBottom;\n\t\t}\n\t\tthis.muuri.refreshItems();\n\t\tthis.muuri._refreshDimensions();\n\t\tthis.muuri.layout();\n\t}\n\tif(changedTiddlers[SEAMLESS_CONFIG]) {\n\t\tthis.muuri.refreshItems();\n\t\tthis.muuri._refreshDimensions();\n\t\tthis.muuri.layout();\n\t}\n\tif(changedTiddlers[DRAGSORTACTION_CONFIG] || changedAttributes.dragSortAction) {\n\t\tthis.muuri._settings.dragSortPredicate.action = this.dragSortAction = this.listWidget.getAttribute(\"dragSortAction\",this.storyListTitle === \"$:/StoryList\" ? this.listWidget.wiki.getTiddlerText(DRAGSORTACTION_CONFIG) : \"move\");\n\t}\n\tif(changedTiddlers[DRAGSORTTHRESHOLD_CONFIG] || changedAttributes.dragSortThreshold) {\n\t\tthis.muuri._settings.dragSortPredicate.threshold = this.dragSortThreshold = parseInt(this.listWidget.getAttribute(\"dragSortThreshold\",this.storyListTitle === \"$:/StoryList\" ? this.listWidget.wiki.getTiddlerText(DRAGSORTTHRESHOLD_CONFIG) : \"40\"));\n\t}\n\tif(changedTiddlers[this.itemTemplate] || changedTiddlers[this.itemEditTemplate]) {\n\t\tsetTimeout(function(){\n\t\t\tself.listWidget.refreshSelf();\n\t\t},50);\n\t}\n\tif(changedAttributes.storyList || changedAttributes.storyListField || changedAttributes.containerClass || changedAttributes.itemClass || changedAttributes.zIndexTiddler || changedAttributes.dragHandle) {\n\t\tthis.listWidget.refreshSelf();\n\t}\n\treturn true;\n}\n\nexports.muuri = MuuriStoryView;\n\n})();\n",
            "type": "application/javascript",
            "title": "$:/plugins/BTC/Muuri/modules/storyviews/muuri.js",
            "tags": "",
            "module-type": "storyview",
            "modified": "20201216202332442",
            "created": "20200823113928572"
        },
        "$:/plugins/BTC/Muuri/ui/Buttons/column": {
            "created": "20200823130533556",
            "text": "\\define set-next-column-actions()\n<$list filter=\"[<columns>!match<rangeMax>]\" emptyMessage=\"\"\"\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text=\"1\"/>\n\"\"\">\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text={{{ [range<rangeMax>after<columns>] }}}/>\n</$list>\n\\end\n\\whitespace trim\n<$reveal state=\"$:/view\" type=\"match\" text=\"muuri\">\n<$vars rangeMax={{$:/config/muuri/storyview/columns/max}} columns={{{ [[$:/config/muuri/storyview/columns]!is[missing]get[text]] ~[[1]] }}}>\n<$button tooltip={{$:/language/Buttons/Muuri/Columns/Hint}} aria-label={{$:/language/Buttons/Muuri/Columns/Caption}} class=<<tv-config-toolbar-class>> actions=<<set-next-column-actions>>>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/plugins/BTC/Muuri/icons/column}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text=\"columns\"/></span>\n</$list>\n</$button>\n</$vars>\n</$reveal>",
            "title": "$:/plugins/BTC/Muuri/ui/Buttons/column",
            "tags": "$:/tags/PageControls",
            "modified": "20201011115237906",
            "description": "change columns",
            "caption": "{{$:/plugins/BTC/Muuri/icons/column}} columns"
        },
        "$:/plugins/BTC/Muuri/ui/Buttons/dragging-toggle": {
            "text": "\\define get-button-class(class)\n$(tv-config-toolbar-class)$ tc-toolbar-icon $class$\n\\end\n\\define get-dragging-tooltip(onoff)\ndragging $onoff$ - [$(draggingShortcut)$]\n\\end\n\n\\whitespace trim\n<$reveal state=\"$:/view\" type=\"match\" text=\"muuri\">\n<$vars draggingShortcut={{$:/config/shortcuts/select-text}} state=\"$:/config/muuri/storyview/select-text\">\n<$reveal state=<<state>> type=\"nomatch\" text=\"yes\">\n<$button class=<<get-button-class \"tc-selected\">> tooltip=<<get-dragging-tooltip \"off\">>>\n<$action-setfield $tiddler=<<state>> text=\"yes\"/>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/plugins/BTC/Muuri/icons/dragging-toggle}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text=\"dragging\"/></span>\n</$list>\n</$button>\n</$reveal>\n<$reveal state=<<state>> type=\"match\" text=\"yes\">\n<$button class=<<get-button-class>> tooltip=<<get-dragging-tooltip \"on\">>>\n<$action-deletetiddler $tiddler=<<state>>/>\n<$list filter=\"[<tv-config-toolbar-icons>prefix[yes]]\">\n{{$:/plugins/BTC/Muuri/icons/dragging-toggle}}\n</$list>\n<$list filter=\"[<tv-config-toolbar-text>prefix[yes]]\">\n<span class=\"tc-btn-text\"><$text text=\"toggle dragging\"/></span>\n</$list>\n</$button>\n</$reveal>\n</$vars>\n</$reveal>",
            "title": "$:/plugins/BTC/Muuri/ui/Buttons/dragging-toggle",
            "tags": "$:/tags/PageControls",
            "modified": "20201009164631226",
            "description": "enables/disables dragging",
            "created": "20200829125954097",
            "caption": "{{$:/plugins/BTC/Muuri/icons/dragging}} dragging"
        },
        "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/select-text": {
            "text": "<$list filter=\"[[$:/config/muuri/storyview/select-text]is[missing]] [[$:/config/muuri/storyview/select-text]!is[missing]get[text]match[no]]\" emptyMessage=\"\"\"\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/select-text\" text=\"no\"/>\n\"\"\">\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/select-text\" text=\"yes\"/>\n</$list>",
            "title": "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/select-text",
            "tags": "$:/tags/KeyboardShortcut",
            "modified": "20201017081746893",
            "key": "((select-text))",
            "created": "20201016203641424"
        },
        "$:/config/ShortcutInfo/columns-down": {
            "created": "20201011115241076",
            "text": "One less column",
            "tags": "",
            "title": "$:/config/ShortcutInfo/columns-down",
            "modified": "20201011115259666"
        },
        "$:/config/ShortcutInfo/columns-up": {
            "created": "20201011115300661",
            "text": "One more column",
            "tags": "",
            "title": "$:/config/ShortcutInfo/columns-up",
            "modified": "20201011115317849"
        },
        "$:/config/ShortcutInfo/select-text": {
            "created": "20201011115319881",
            "text": "Toggle dragging (selecting text enabled/disabled)",
            "tags": "",
            "title": "$:/config/ShortcutInfo/select-text",
            "modified": "20201011115357214"
        },
        "$:/config/shortcuts/columns-down": {
            "created": "20201011115128007",
            "text": "alt-shift-Left",
            "tags": "",
            "title": "$:/config/shortcuts/columns-down",
            "modified": "20201011115141122"
        },
        "$:/config/shortcuts/columns-up": {
            "created": "20201011114754200",
            "text": "alt-shift-Right",
            "tags": "",
            "title": "$:/config/shortcuts/columns-up",
            "modified": "20201011115005812"
        },
        "$:/config/shortcuts/select-text": {
            "text": "alt-D",
            "title": "$:/config/shortcuts/select-text",
            "tags": "",
            "modified": "20201016203621881",
            "created": "20201016203606461"
        },
        "$:/plugins/BTC/Muuri/ui/ControlPanel/Appearance": {
            "text": "//<small>Tiddler margin left/right:</small>//\n\n<$edit-text tag=\"input\" tiddler=\"$:/config/muuri/tiddler/margin\" default=\"\" placeholder=\"tiddler margin left/right\"/>\n\n//<small>Tiddler margin bottom:</small>//\n\n<$edit-text tag=\"input\" tiddler=\"$:/config/muuri/tiddler/margin-bottom\" default=\"\" placeholder=\"tiddler margin bottom\"/>\n\n//<small>Top story river margin:</small>//\n\n<$edit-text tag=\"input\" tiddler=\"$:/config/muuri/storyview/story-river/margin-top\" default=\"\" placeholder=\"top story river margin\"/>\n\n//<small>Max amount of columns:</small>//\n\n<$edit-text tag=\"input\" tiddler=\"$:/config/muuri/storyview/columns/max\" default=\"\" placeholder=\"max columns\"/>\n\n//<small>Drag-sort threshold:</small>//\n\n<$edit-text tag=\"input\" tiddler=\"$:/config/muuri/storyview/dragsort-threshold\" default=\"\" placeholder=\"threshold\"/>\n\n//<small>Align left/right:</small>//\n\n<$select tiddler=\"$:/config/muuri/storyview/align-right\" default=\"yes\">\n<option value=\"no\">left</option>\n<option value=\"yes\">right</option>\n</$select>\n\n//<small>Align top/bottom/rows:</small>//\n\n<$select tiddler=\"$:/config/muuri/storyview/align-bottom\" default=\"0\">\n<option value=\"0\">top</option>\n<option value=\"1\">bottom</option>\n<option value=\"2\">rows</option>\n</$select>\n\n//<small>Gapless story view:</small>//\n\n<$select tiddler=\"$:/config/muuri/storyview/fill-gaps\" default=\"no\">\n<option value=\"no\">no</option>\n<option value=\"yes\">yes</option>\n</$select>\n\n//<small>Hide titles and tags:</small>//\n\n<$select tiddler=\"$:/config/muuri/storyview/hide-titles-tags\" default=\"no\">\n<option value=\"no\">no</option>\n<option value=\"yes\">yes</option>\n</$select>\n\n//<small>Drag-sort action:</small>//\n\n<$select tiddler=\"$:/config/muuri/storyview/dragsort-action\" default=\"move\">\n<option value=\"move\">move</option>\n<option value=\"swap\">swap</option>\n</$select>\n",
            "title": "$:/plugins/BTC/Muuri/ui/ControlPanel/Appearance",
            "tags": "$:/tags/ControlPanel/Appearance",
            "modified": "20201214051450943",
            "created": "20201011120412006",
            "caption": "Muuri"
        },
        "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/columns-down": {
            "text": "<$vars rangeMax={{$:/config/muuri/storyview/columns/max}} columns={{{ [[$:/config/muuri/storyview/columns]!is[missing]get[text]] ~[[1]] }}}>\n<$list filter=\"[<columns>!match[1]]\" emptyMessage=\"\"\"\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text=<<rangeMax>>/>\n\"\"\">\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text={{{ [range<rangeMax>before<columns>] }}}/>\n</$list>\n</$vars>",
            "title": "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/columns-down",
            "tags": "$:/tags/KeyboardShortcut",
            "modified": "20201011115126139",
            "key": "((columns-down))",
            "created": "20201011115015991"
        },
        "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/columns-up": {
            "text": "<$vars rangeMax={{$:/config/muuri/storyview/columns/max}} columns={{{ [[$:/config/muuri/storyview/columns]!is[missing]get[text]] ~[[1]] }}}>\n<$list filter=\"[<columns>!match<rangeMax>]\" emptyMessage=\"\"\"\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text=\"1\"/>\n\"\"\">\n<$action-setfield $tiddler=\"$:/config/muuri/storyview/columns\" text={{{ [range<rangeMax>after<columns>] }}}/>\n</$list>\n</$vars>",
            "title": "$:/plugins/BTC/Muuri/ui/KeyboardShortcuts/columns-up",
            "tags": "$:/tags/KeyboardShortcut",
            "modified": "20201011114900214",
            "key": "((columns-up))",
            "created": "20201011114558174"
        },
        "$:/config/muuri/storyview/dragsort-action": {
            "created": "20201024194236301",
            "text": "move",
            "tags": "",
            "title": "$:/config/muuri/storyview/dragsort-action",
            "modified": "20201024212847732"
        },
        "$:/config/muuri/storyview/dragsort-threshold": {
            "created": "20201024194254269",
            "text": "40",
            "tags": "",
            "modified": "20201024212922868",
            "title": "$:/config/muuri/storyview/dragsort-threshold"
        },
        "$:/config/muuri/storyview/columns": {
            "text": "5",
            "title": "$:/config/muuri/storyview/columns",
            "modified": "20201216201643363",
            "created": "20201213093811050"
        }
    }
}
